(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc042f88"],{"0733":function(t,e,n){"use strict";n("7f5c")},"11f3":function(t,e,n){},"1d61":function(t,e,n){"use strict";n("90b8")},"205c":function(t,e,n){},2452:function(t,e,n){"use strict";n("7435")},"2f90":function(t,e,n){"use strict";n("f103")},3794:function(t,e,n){"use strict";n("205c")},4873:function(t,e,n){},"51dc":function(t,e,n){"use strict";n("e45f")},"576a":function(t,e,n){"use strict";n("8728")},"614b":function(t,e,n){"use strict";n("cdb1")},"62fd":function(t,e,n){},6309:function(t,e,n){"use strict";n("4873")},"6c80":function(t,e,n){},7435:function(t,e,n){},"78cc":function(t,e,n){"use strict";n("cba7")},"7f5c":function(t,e,n){},8012:function(t,e,n){"use strict";n("6c80")},8728:function(t,e,n){},"90b8":function(t,e,n){},9267:function(t,e,n){},a3ce:function(t,e,n){"use strict";n("c6c0")},b328:function(t,e,n){"use strict";n("9267")},bab5:function(t,e,n){"use strict";n("d092")},c460:function(t,e,n){},c6c0:function(t,e,n){},cba7:function(t,e,n){},cdb1:function(t,e,n){},d092:function(t,e,n){},e20b:function(t,e,n){"use strict";n("c460")},e45f:function(t,e,n){},e7a5:function(t,e,n){"use strict";n("11f3")},f103:function(t,e,n){},fbd7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-editor editor-wrapper"},[n("div",{staticClass:"editor-side-bar border-R"},[n("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"},model:{value:t.activeSideBar,callback:function(e){t.activeSideBar=e},expression:"activeSideBar"}},t._l(t.sidebarMenus,(function(t,e){return n("el-tab-pane",{key:e,attrs:{name:t.value}},[n("el-tooltip",{staticClass:"item",attrs:{slot:"label",effect:"dark",content:t.label,placement:"right"},slot:"label"},[n("i",{class:t.elementUiIcon})])],1)})),1)],1),n("div",{staticClass:"editor-page-edit-wrapper"},["componentLibs"===t.activeSideBar?n("componentLibs"):t._e(),"pageManage"===t.activeSideBar?n("pageManage"):t._e()],1),n("div",{staticClass:"editor-main",on:{contextmenu:t.onContextmenu}},[n("div",{staticClass:"control-bar-wrapper"},[n("controlBar",{attrs:{scale:t.canvasConfig.scale},on:{"update:scale":function(e){return t.$set(t.canvasConfig,"scale",e)},"import-psd-data":t.importPsdData,cancel:t.cancelFn,publish:t.publishFn,save:t.saveFn,showPreviewFn:t.showPreviewFn}})],1),n("editorPan",{attrs:{scale:t.canvasConfig.scale},on:{"update:scale":function(e){return t.$set(t.canvasConfig,"scale",e)}}})],1),n("div",{staticClass:"el-attr-edit-wrapper scrollbar-wrapper"},[n("el-tabs",{attrs:{stretch:""},model:{value:t.activeAttr,callback:function(e){t.activeAttr=e},expression:"activeAttr"}},[n("el-tab-pane",{attrs:{label:"属性",name:"属性"}},[n("attrEdit")],1),n("el-tab-pane",{attrs:{label:"动画",name:"动画"}},[n("animationEdit")],1),n("el-tab-pane",{attrs:{label:"页面设置",name:"页面属性"}},[n("pageAttrEdit")],1)],1)],1),t.showMakingPanel?n("makingPanel",{attrs:{pageData:t.projectData},on:{closePanel:function(e){t.showMakingPanel=!1},saveFn:t.saveFn}}):t._e()],1)},a=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("96cf"),n("1da1")),o=n("ade3"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-libs-wrapper scrollbar-wrapper"},[n("p",{staticClass:"page-title text-center"},[t._v("组件库")]),n("el-scrollbar",{staticStyle:{height:"100%"}},[n("ul",{staticClass:"scrollbar-wrapper"},t._l(t.componentsList,(function(e,i){return n("li",{key:i,staticClass:"clearfix paddingB30"},[n("div",{staticClass:"components-libs-title"},[n("p",[t._v(t._s(e.title))])]),e.components&&e.components.length?n("div",t._l(e.components,(function(e,i){return n("div",{key:i,staticClass:"components-lib-item",on:{click:function(n){return t.handleClick(e)}}},[n("div",{staticClass:"lib-item-img"},[n("i",{class:[e.icon]})]),n("p",{staticClass:"lib-item-title"},[t._v(t._s(e.title))])])})),0):n("div",[n("p",{staticClass:"gray text-center paddingT20"},[t._v("待完善...")])])])})),0)])],1)},s=[],l=(n("6762"),n("2fdb"),n("2ef0")),u=n("9b2a"),p=[{title:"基础组件",components:[{elName:"qk-text",title:"文字",icon:"iconfont iconwenben",valueType:"",defaultStyle:{height:40}},{elName:"qk-subtitle",title:"字幕",icon:"iconfont iconwenben",valueType:"",defaultStyle:{height:40}},{elName:"qk-image",title:"图片",icon:"iconfont icontupian",valueType:"",defaultStyle:{height:200}},{elName:"qk-rectangle-border",title:"纯色方块",icon:"iconfont iconjuxing",valueType:"",defaultStyle:{width:200,height:200}},{elName:"qk-rectangle-border",title:"分割线",icon:"iconfont icon758bianjiqi_fengexian",valueType:"",defaultStyle:{height:1,width:300,backgroundColor:"#999999"}},{elName:"qk-image-carousel",title:"图片相册",icon:"iconfont iconshouyelunbotu",valueType:"",defaultStyle:{height:210}},{elName:"qk-video",title:"视频",icon:"iconfont iconshipin",valueType:"",defaultStyle:{width:u["a"].canvasH5Width,height:300,paddingTop:10,paddingBottom:10}}]},{title:"功能组件",components:[{elName:"qk-bg-music",title:"音乐",icon:"iconfont iconyinlemusic217",valueType:"",defaultStyle:{height:52,width:52}}]},{title:"业务组件",components:[]}],m=n("03ce");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window._qk_register_components_object=m["a"];var h={name:"component-libs",data:function(){return{componentsList:p}},methods:{handleClick:function(t){var e=this.getComponentProps(t.elName);this.$store.dispatch("addElement",f(f({},t),{},{needProps:e}))},getComponentProps:function(t){var e;for(var n in m["a"])if(n.toLowerCase()===Object(l["camelCase"])(t).toLowerCase()){e=m["a"][n];break}if(!e)return{};var i={};for(var a in e.props)i[a]=[Object,Array].includes(e.props[a].type)?e.props[a].default():e.props[a].default;return i}}},v=h,b=(n("2f90"),n("0c7c")),g=Object(b["a"])(v,c,s,!1,null,"e43111b6",null),y=g.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-page-manage scrollbar-wrapper"},[n("p",{staticClass:"page-title text-center"},[t._v("页面管理")]),n("el-scrollbar",{staticClass:"components-main-conten",staticStyle:{height:"100%"}},t._l(t.projectData.pages,(function(e,i){return n("div",{key:e.uuid,staticClass:"page-item clearfix",class:{active:t.activePageUUID===e.uuid},on:{click:function(n){return t.changeActivePage(e)}}},[n("div",{staticClass:"inline-block"},[n("span",{staticClass:"page-item-index"},[t._v(t._s(i+1))]),t._v("\n        第"+t._s(i+1)+"页\n      ")]),n("div",{staticClass:"page-item-btn-wrapper pull-right width20"},[n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-more-outline"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("div",{staticClass:"btn-item",on:{click:function(n){return t.copyPage(e)}}},[n("i",{staticClass:"el-icon-document-copy"}),t._v(" 复制页面")])]),n("el-dropdown-item",[n("div",{staticClass:"btn-item",on:{click:function(n){return t.addPage(e)}}},[n("i",{staticClass:"el-icon-document-add"}),t._v(" 新增页面")])]),n("el-dropdown-item",[n("div",{staticClass:"btn-item",on:{click:function(n){return t.deletePage(e)}}},[n("i",{staticClass:"el-icon-delete"}),t._v(" 删除页面")])])],1)],1)],1)])})),0),n("div",{staticClass:"bottom-btn-wrapper"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addPage()}}},[t._v("新增空页面")])],1)],1)},j=[],w=n("2f62");function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x={computed:P({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),methods:{changeActivePage:function(t){this.$store.dispatch("setActivePageUUID",t.uuid)},copyPage:function(t){this.$store.dispatch("copyPage",t.uuid)},addPage:function(t){this.$store.dispatch("addPage",t?t.uuid:"")},deletePage:function(t){this.$store.dispatch("deletePage",t.uuid)}}},k=x,D=(n("e7a5"),Object(b["a"])(k,O,j,!1,null,"01058ebe",null)),E=D.exports,S=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"page-title text-center"},[t._v("模板库")]),n("p",{staticClass:"gray text-center paddingT20"},[t._v("待完善...")])])}],U={name:"template-libs"},$=U,I=Object(b["a"])($,S,_,!1,null,"1a4d1c5a",null),V=I.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"editorPane",staticClass:"editor-pane",on:{click:t.handleClickCanvas,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleKeyup.apply(null,arguments)}}},[n("div",{staticClass:"editor-pane-inner"},[n("div",{staticClass:"editor-main",style:{transform:"scale("+t.scale+")",width:t.projectData.width+"px",height:t.projectData.height+"px"}},[n("div",{ref:"canvas-panel",staticClass:"page-preview-wrapper",style:t.getCommonStyle(t.activePage.commonStyle),attrs:{id:"canvas-panel"}},t._l(t.activePage.elements,(function(e){return n("edit-shape",{key:e.uuid,style:t.getCommonStyle({width:e.commonStyle.width,height:e.commonStyle.height,left:e.commonStyle.left,top:e.commonStyle.top,position:e.commonStyle.position}),attrs:{uuid:e.uuid,defaultStyle:e.commonStyle,active:e.uuid===t.activeElementUUID},on:{handleElementClick:function(n){return t.handleElementClick(e.uuid)},resize:t.handleElementResize}},[n(e.elName,t._b({tag:"component",staticClass:"element-on-edit-pane",style:t.getCommonStyle(Object.assign({},e.commonStyle,{top:0,left:0}))},"component",e.propsValue,!1))],1)})),1),n("div",{staticClass:"page-wrapper-mask"})]),n("div",{staticClass:"page-wrapper-menu-operation menu-item-on-edit-panel",class:{active:t.activeElementUUID},style:t.getMenuOptionsPositionStyle},t._l(t.menuOptions,(function(e,i){return n("el-tooltip",{key:i,attrs:{effect:"dark",content:e.title,placement:"right"}},[n("div",{staticClass:"menu-item menu-item-on-edit-panel",on:{click:function(n){return t.handleElementCommand(e.value)}}},[n("i",{staticClass:"menu-item-on-edit-panel",class:[e.icon]})])])})),1)])])},T=[],z=(n("7f7f"),n("c5f6"),n("1336")),q=n("a402"),F=n("fbb0"),N=n.n(F);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window._qk_register_components_object=m["a"];var B={props:{scale:{type:Number,default:1}},components:L(L({},m["a"]),{},Object(o["a"])({},q["a"].name,q["a"])),data:function(){return{getCommonStyle:z["a"].getCommonStyle,menuOptions:[{title:"复制",icon:"iconfont iconfuzhi",value:"copy"},{title:"删除",icon:"iconfont iconshanchu",value:"delete"},{title:"字体放大",icon:"iconfont iconzitifangda",value:"fontA+"},{title:"字体缩小",icon:"iconfont iconzitisuoxiao",value:"fontA-"},{title:"字体加粗",icon:"iconfont iconzitijiacu",value:"fontB"},{title:"图层上移",icon:"iconfont iconziyuan1",value:"layerUp"},{title:"图层下移",icon:"iconfont iconxiayiyiceng",value:"layerDown"},{title:"图层置顶",icon:"iconfont iconcontrol-top",value:"layerTop"},{title:"图层置底",icon:"iconfont iconcontrol-bottom",value:"layerBottom"}],editorPaneWidth:0}},computed:L(L(L({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),Object(w["c"])(["currentPageIndex","activeElementIndex","activeElement","activePage"])),{},{getMenuOptionsPositionStyle:function(){var t=60,e=this.activeElementUUID,n=this.$refs.editorPane?this.$refs.editorPane.offsetWidth:0,i=(n-this.projectData.width*this.scale)/2-(t+15),a=i<t?16:i;return{cid:e,right:a+"px"}}}),mounted:function(){this.editorPaneWidth=this.$refs.editorPane.offsetWidth},methods:{handleElementClick:function(t){this.$store.dispatch("setActiveElementUUID",t)},handleElementResize:function(t){t?(this.projectData.pages[this.currentPageIndex].elements[this.activeElementIndex].commonStyle.left=t.left,this.projectData.pages[this.currentPageIndex].elements[this.activeElementIndex].commonStyle=L({},t)):this.$store.dispatch("addHistoryCache")},handleClickCanvas:function(t){t.target.classList.contains("element-on-edit-pane")||t.target.classList.contains("menu-item-on-edit-panel")||this.$store.dispatch("setActiveElementUUID","")},handleElementCommand:function(t){this.$store.dispatch("elementCommand",t)},handleKeyup:function(t){},screenshots:function(){var t=this,e=document.querySelector("#canvas-panel");N()(e,{width:375,height:667,proxy:"/quark/html2canvas/corsproxy"}).then((function(e){var n=e.toDataURL("image/jpeg");t.$store.commit("updateCoverImage",n)}))}}},H=B,M=(n("3794"),Object(b["a"])(H,A,T,!1,null,"070c8d2e",null)),W=M.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-scrollbar",{staticClass:"components-attr-edit"},[t.activeElementUUID?n("div",{staticClass:"attr-edit-inner"},[n("div",{staticClass:"props-attr-style"},[n("propsAttr")],1),n("div",{staticClass:"common-attr-style"},[n("baseAttr")],1)]):n("div",[n("p",{staticClass:"gray paddingT30 text-center"},[t._v("请在画板上选择需要编辑得元素")])])])},J=[],X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:"样式",name:"1"}},[n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("尺寸：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.activeElement.commonStyle.width,callback:function(e){t.$set(t.activeElement.commonStyle,"width",e)},expression:"activeElement.commonStyle.width"}}),n("div",{staticClass:"attr-item-edit-input-des"},[t._v("宽度")])],1),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.activeElement.commonStyle.height,callback:function(e){t.$set(t.activeElement.commonStyle,"height",e)},expression:"activeElement.commonStyle.height"}}),n("div",{staticClass:"attr-item-edit-input-des"},[t._v("高度")])],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("位置：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.activeElement.commonStyle.left,callback:function(e){t.$set(t.activeElement.commonStyle,"left",e)},expression:"activeElement.commonStyle.left"}}),n("div",{staticClass:"attr-item-edit-input-des"},[t._v("X")])],1),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.activeElement.commonStyle.top,callback:function(e){t.$set(t.activeElement.commonStyle,"top",e)},expression:"activeElement.commonStyle.top"}}),n("div",{staticClass:"attr-item-edit-input-des"},[t._v("Y")])],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("旋转：")]),n("div",{staticClass:"col-1 attr-item-edit-input"},[n("el-slider",{attrs:{"show-input":"",min:-180,max:180,marks:{0:"",90:"","-90":""},"input-size":"mini"},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.rotate,callback:function(e){t.$set(t.activeElement.commonStyle,"rotate",e)},expression:"activeElement.commonStyle.rotate"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("透明度：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,max:1,step:.1},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.opacity,callback:function(e){t.$set(t.activeElement.commonStyle,"opacity",e)},expression:"activeElement.commonStyle.opacity"}})],1)])]),n("el-collapse-item",{attrs:{title:"字体：",name:"4"}},[n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("字体颜色：")]),n("div",{staticClass:"attr-item-edit-input"},[n("el-color-picker",{attrs:{size:"mini"},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.color,callback:function(e){t.$set(t.activeElement.commonStyle,"color",e)},expression:"activeElement.commonStyle.color"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("字体大小：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.fontSize,callback:function(e){t.$set(t.activeElement.commonStyle,"fontSize",e)},expression:"activeElement.commonStyle.fontSize"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("字体粗细：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:300,step:100,max:900},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.fontWeight,callback:function(e){t.$set(t.activeElement.commonStyle,"fontWeight",e)},expression:"activeElement.commonStyle.fontWeight"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("字间距：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.letterSpacing,callback:function(e){t.$set(t.activeElement.commonStyle,"letterSpacing",e)},expression:"activeElement.commonStyle.letterSpacing"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("对齐方式：")]),n("div",{staticClass:"sizeAndPosition-wrapper"},[n("div",{staticClass:"align-type-item clearFlex",on:{click:function(e){return t.handleTextAlignClick("left")}}},[n("el-tooltip",{attrs:{effect:"dark",content:"左对齐",placement:"bottom"}},[n("i",{staticClass:"iconfont iconzuoduiqi1"})])],1),n("div",{staticClass:"align-type-item clearFlex",on:{click:function(e){return t.handleTextAlignClick("center")}}},[n("el-tooltip",{attrs:{effect:"dark",content:"居中对齐",placement:"bottom"}},[n("i",{staticClass:"iconfont iconjuzhongduiqi"})])],1),n("div",{staticClass:"align-type-item clearFlex",on:{click:function(e){return t.handleTextAlignClick("right")}}},[n("el-tooltip",{attrs:{effect:"dark",content:"右对齐",placement:"bottom"}},[n("i",{staticClass:"iconfont iconyouduiqi2"})])],1)])])])],1)],1)},Y=[];n("a481"),n("28a5");function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G,tt={data:function(){return{activeNames:["1"],alignTypeList:[{title:"左对齐",icon:"iconfont iconzuoduiqi",type:"l"},{title:"上对齐",icon:"iconfont iconshangduiqi",type:"t"},{title:"右对齐",icon:"iconfont iconyouduiqi",type:"r"},{title:"下对齐",icon:"iconfont iconxiaduiqi",type:"b"},{title:"垂直居中对齐",icon:"iconfont iconchuizhijuzhongduiqi",type:"tb"},{title:"水平居中对齐",icon:"iconfont iconshuipingjuzhongduiqi",type:"lr"}],borderStyleList:[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"点状",value:"dotted"},{label:"双线",value:"double"}],boxShadow:{h:0,v:0,blur:0,spread:0,color:"#000000"}}},computed:Z(Z({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID},activeAttrEditCollapse:function(t){return t.editor.activeAttrEditCollapse}})),Object(w["c"])(["currentPageIndex","activeElementIndex","activeElement","activePage"])),watch:{activeElementUUID:function(){var t=this;this.$nextTick((function(){t.initBoxShadowEdit()}))},activeNames:function(){this.$store.commit("updateActiveAttrEditCollapse",this.activeNames)}},created:function(){this.throttleAddHistory=Object(l["throttle"])(this.addHistory,3e3)},mounted:function(){this.initBoxShadowEdit(),this.activeNames=this.activeAttrEditCollapse},methods:{addHistory:function(){this.$store.dispatch("addHistoryCache")},changeAlignType:function(t){var e=this.$config.canvasH5Width,n=this.$config.canvasH5Height,i=this.activeElement.commonStyle.width,a=this.activeElement.commonStyle.height;switch(t){case"t":this.activeElement.commonStyle.top=0;break;case"b":this.activeElement.commonStyle.top=Object(l["subtract"])(n-a);break;case"l":this.activeElement.commonStyle.left=0;break;case"r":this.activeElement.commonStyle.left=Object(l["subtract"])(e-i);break;case"tb":this.activeElement.commonStyle.top=Object(l["ceil"])(Object(l["divide"])(Object(l["subtract"])(n-a),2),2);break;case"lr":this.activeElement.commonStyle.left=Object(l["ceil"])(Object(l["divide"])(Object(l["subtract"])(e-i),2),2);break}},initBoxShadowEdit:function(){var t=this.activeElement.commonStyle.boxShadow,e={h:0,v:0,blur:0,spread:0,color:"#000000"};if(t&&"none"!==t){var n=t.split(" ");e={h:parseInt(n[0].replace("px","")),v:parseInt(n[1].replace("px","")),blur:parseInt(n[2].replace("px","")),spread:parseInt(n[3].replace("px","")),color:n[4]},this.boxShadow=e}else this.boxShadow=e},boxShadowChange:function(){var t="".concat(this.boxShadow.h,"px ").concat(this.boxShadow.v,"px  ").concat(this.boxShadow.blur,"px  ").concat(this.boxShadow.spread,"px  ").concat(this.boxShadow.color);this.activeElement.commonStyle.boxShadow=t},handleTextAlignClick:function(t){this.activeElement.commonStyle.textAlign=t},handleResizeClick:function(t){t.includes("w")&&(this.activeElement.commonStyle.left=0,this.activeElement.commonStyle.width=this.$config.canvasH5Width),t.includes("h")&&(this.activeElement.commonStyle.top=0,this.activeElement.commonStyle.height=this.$config.canvasH5Height)}}},et=tt,nt=(n("0733"),n("51dc"),Object(b["a"])(et,X,Y,!1,null,"05677e35",null)),it=nt.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentElementProps.length?n("div",[n("div",{staticClass:"attr-title marginB10 fontBold"},[t._v("组件属性")]),n("el-form",t._l(t.currentElementProps,(function(e){return n("attr-qk-"+e,t._b({key:e,tag:"component"},"component",t.activeElement.propsValue,!1,!0))})),1)],1):t._e()},rt=[],ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"文本内容："}},[n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入文本内容"},model:{value:t.tempText,callback:function(e){t.tempText=e},expression:"tempText"}})],1)},ct=[],st={name:"attr-qk-text",props:{text:String},data:function(){return{tempText:""}},mounted:function(){this.tempText=this.text},watch:{text:function(){this.tempText=this.text},tempText:function(){this.$emit("update:text",this.tempText)}}},lt=st,ut=Object(b["a"])(lt,ot,ct,!1,null,"226c3692",null),pt=ut.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"图片："}},[n("fileUploader",{model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},dt=[],ft=n("545b"),ht={name:"attr-qk-imageSrc",props:{imageSrc:String},components:{fileUploader:ft["a"]},data:function(){return{tempValue:""}},mounted:function(){this.tempValue=this.imageSrc},watch:{imageSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:imageSrc",this.tempValue)}}},vt=ht,bt=Object(b["a"])(vt,mt,dt,!1,null,"4fe583c5",null),gt=bt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"相册动画间隔："}},[n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,step:.1,max:100},model:{value:t.tempVal,callback:function(e){t.tempVal=e},expression:"tempVal"}})],1)])},Ot=[],jt={name:"attr-qk-interval",props:{interval:Number},data:function(){return{tempVal:""}},mounted:function(){this.tempVal=this.interval},watch:{interval:function(){this.tempVal=this.interval},tempVal:function(){this.$emit("update:interval",this.tempVal)}}},wt=jt,Ct=Object(b["a"])(wt,yt,Ot,!1,null,"042aaef5",null),Pt=Ct.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"视频地址："}},[n("fileUploader",{attrs:{type:"video"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},kt=[],Dt={name:"attr-qk-videoSrc",props:{videoSrc:String},components:{fileUploader:ft["a"]},data:function(){return{tempValue:""}},mounted:function(){this.tempValue=this.videoSrc},watch:{videoSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:videoSrc",this.tempValue)}}},Et=Dt,St=Object(b["a"])(Et,xt,kt,!1,null,"608fba22",null),_t=St.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",t._l(t.tempValue,(function(e,i){return n("div",{key:i,staticClass:"con"},[n("fileUploader",{attrs:{type:"image"},on:{uploaded:t.imgUploaded},model:{value:e.url,callback:function(n){t.$set(e,"url",n)},expression:"item.url"}}),n("div",[n("span",{staticClass:"imageSelect-btn",on:{click:function(e){return t.onClick("+",i)}}},[n("i",{staticClass:"el-icon-circle-plus-outline"})]),n("span",{staticClass:"imageSelect-btn",on:{click:function(e){return t.onClick("-",i)}}},[n("i",{staticClass:"el-icon-remove-outline"})])]),n("hr",{staticClass:"hr"})],1)})),0)},$t=[],It={name:"attr-qk-imageSrcList",props:{imageSrcList:{type:Array,default:function(){return[]}}},components:{fileUploader:ft["a"]},data:function(){return{tempValue:[]}},created:function(){this.fillTempValue()},methods:{fillTempValue:function(){var t=[];this.imageSrcList.forEach((function(e){return t.push({url:e})})),this.tempValue=t},imgUploaded:function(){var t=this.getResultImageSrcList();this.$emit("update:imageSrcList",t)},getResultImageSrcList:function(){for(var t=[],e=0,n=this.tempValue.length;e<n;e++)t.push(this.tempValue[e].url);return t},onClick:function(t,e){if("+"===t)this.tempValue.splice(e+1,0,{url:"/static/demo/demo.jpg"});else{if(this.tempValue.length<=2)return void this.$message("最少要有两张图片!");this.tempValue.splice(e,1)}this.imgUploaded()}}},Vt=It,At=(n("614b"),Object(b["a"])(Vt,Ut,$t,!1,null,"4e5e4315",null)),Tt=At.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"url地址："}},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入url地址"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},qt=[],Ft={name:"attr-qk-url",props:{url:String},data:function(){return{tempValue:""}},mounted:function(){this.tempValue=this.url},watch:{url:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:url",this.tempValue)}}},Nt=Ft,Rt=Object(b["a"])(Nt,zt,qt,!1,null,"3524a203",null),Lt=Rt.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"颜色："}},[n("el-color-picker",{attrs:{size:"mini","show-alpha":!0},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},Ht=[],Mt={name:"attr-qk-bgColor",props:{bgColor:{type:String,default:function(){return"#ffcc22"}}},mounted:function(){this.tempValue=this.bgColor},data:function(){return{tempValue:"#ffcc22"}},watch:{imageSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:bgColor",this.tempValue)}}},Wt=Mt,Kt=Object(b["a"])(Wt,Bt,Ht,!1,null,"80491f9c",null),Jt=Kt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"资源地址："}},[n("fileUploader",{attrs:{type:"music"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},Yt=[],Qt={name:"attr-qk-musicSrc",props:{musicSrc:String},components:{fileUploader:ft["a"]},data:function(){return{tempValue:""}},mounted:function(){this.tempValue=this.musicSrc},watch:{musicSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:musicSrc",this.tempValue)}}},Zt=Qt,Gt=Object(b["a"])(Zt,Xt,Yt,!1,null,"4730f842",null),te=Gt.exports,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:"文本内容："}},[n("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入文本内容，换行分段"},model:{value:t.tempText,callback:function(e){t.tempText=e},expression:"tempText"}})],1)},ne=[],ie={name:"attr-qk-subtitle",props:{subtitle:String},data:function(){return{tempText:""}},mounted:function(){this.tempText=this.subtitle},watch:{text:function(){this.tempText=this.subtitle},tempText:function(){this.$emit("update:subtitle",this.tempText)}}},ae=ie,re=Object(b["a"])(ae,ee,ne,!1,null,"1c275a88",null),oe=re.exports,ce=(G={},Object(o["a"])(G,pt.name,pt),Object(o["a"])(G,oe.name,oe),Object(o["a"])(G,Pt.name,Pt),Object(o["a"])(G,gt.name,gt),Object(o["a"])(G,_t.name,_t),Object(o["a"])(G,Lt.name,Lt),Object(o["a"])(G,te.name,te),Object(o["a"])(G,Jt.name,Jt),Object(o["a"])(G,Tt.name,Tt),G);function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ue={components:le({},ce),computed:le(le(le({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),Object(w["c"])(["currentPageIndex","activeElementIndex","activeElement","activePage"])),{},{currentElementProps:function(){if(!this.activeElement.propsValue)return[];var t=Object.keys(this.activeElement.propsValue),e=Object.keys(ce);return t=t.filter((function(t){return e.includes("attr-qk-"+t)})),t}})},pe=ue,me=Object(b["a"])(pe,at,rt,!1,null,"893fff2c",null),de=me.exports;function fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ve={props:{},components:{baseAttr:it,propsAttr:de},computed:he(he({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),Object(w["c"])(["currentPageIndex","activeElementIndex"]))},be=ve,ge=(n("e20b"),n("78cc"),Object(b["a"])(be,K,J,!1,null,"e37ad54e",null)),ye=ge.exports,Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-attr-edit components-attr-animate-edit"},[n("el-scrollbar",{staticClass:"components-attr-edit"},[t.activeElementUUID?n("div",{staticClass:"attr-edit-inner"},[n("div",{staticClass:"animate-edit-btn-wrapper"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:t.addAnimate}},[t._v("添加动画")]),n("el-button",{attrs:{icon:"el-icon-caret-right",size:"small"},on:{click:function(e){return t.runAnimate(void 0)}}},[t._v("预览动画")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.activeElement.animations.length,expression:"activeElement.animations.length"}],staticClass:"el-animate-list-wrapper paddingT20"},[n("el-collapse",{attrs:{accordion:""}},t._l(t.activeElement.animations,(function(e,i){return n("el-collapse-item",{key:i},[n("template",{slot:"title"},[n("span",{staticClass:"el-animate-title-name"},[t._v("动画 "+t._s(i))]),n("div",{staticClass:"el-animate-title-type-wrapper"},[n("span",{staticClass:"el-animate-title-type",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleShowChooseAnimatePanel(i)}}},[t._v(t._s(e.type)+" "),n("i",{staticClass:"el-icon-caret-right size-mini"})])]),n("span",{staticClass:"el-animate-title-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.runAnimate(i)}}},[n("i",{staticClass:"el-icon-caret-right"})]),n("span",{staticClass:"el-animate-title-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDeleteAnimate.apply(null,arguments)}}},[n("i",{staticClass:"el-icon-delete"})])]),n("div",{staticClass:"el-animate-item"},[n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("动画时长：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,step:.1},model:{value:e.duration,callback:function(n){t.$set(e,"duration",n)},expression:"item.duration"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("动画延迟：")]),n("div",{staticClass:"col-2  attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,step:.1},model:{value:e.delay,callback:function(n){t.$set(e,"delay",n)},expression:"item.delay"}})],1)])])],2)})),1)],1)]):n("div",[n("p",{staticClass:"gray paddingT30 text-center"},[t._v("请在画板上选择需要编辑得元素")])])]),n("div",{staticClass:"components-attr-edit animate-choose-list-wrapper",class:{fadeInUp:t.showAnimatePanel,fadeInDown:!t.showAnimatePanel,animate:t.showAnimatePanel}},[n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.animateCssDatas,(function(e){return n("el-tab-pane",{key:e.label,attrs:{label:e.label,name:e.label}},[n("el-scrollbar",{staticClass:"animate-choose-item"},t._l(e.children,(function(i,a){return n("div",{key:a,class:i.unclick?"animate-choose-item-inner unclick":"animate-choose-item-inner",on:{mouseover:function(e){t.hoverPreviewAnimate=i.value},mouseleave:function(e){t.hoverPreviewAnimate=""},click:function(e){return t.handleChooseAnimate(i)}}},[n("span",{staticClass:"animate-choose-image",class:[t.hoverPreviewAnimate===i.value&&i.value+" animated"],style:{backgroundPosition:e.bg_X+"px "+e.bg_Y+"px"}}),n("p",[t._v(t._s(i.label))])])})),0)],1)})),1)],1)],1)},je=[],we=n("9ed0"),Ce=n("965e"),Pe=n("aee2");function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var De={data:function(){return{animateCssDatas:we["a"],activeName:"进入",showAnimatePanel:!1,reSelectAnimateIndex:void 0,hoverPreviewAnimate:""}},computed:ke(ke({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),Object(w["c"])(["currentPageIndex","activeElementIndex","activeElement"])),watch:{activePageUUID:function(){this.addAnimate(!1)},activeElementUUID:function(){this.addAnimate(!1)}},methods:{handleChooseAnimate:function(t){for(var e=0;e<Ce["a"].children.length;e++)if(t.value===Ce["a"].children[e].value)return console.log(t.value),"";var n;this.showAnimatePanel=!1,"random"===t.value&&(console.log(t.value),n=this.createRandomAnimate(this.activeName),t=n),void 0===this.reSelectAnimateIndex?(console.log(t.value),this.$store.dispatch("addElementAnimate",t.value)):(this.activeElement.animations[this.reSelectAnimateIndex].type=t.value,this.$store.dispatch("addHistoryCache"))},handleDeleteAnimate:function(t){this.$store.dispatch("deleteElementAnimate",t)},addAnimate:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.showAnimatePanel=t,this.reSelectAnimateIndex=void 0},handleShowChooseAnimatePanel:function(t){this.reSelectAnimateIndex=t,this.showAnimatePanel=!0},runAnimate:function(t){console.log(t);var e=void 0===t?this.activeElement.animations:[this.activeElement.animations[t]];Pe["a"].$emit("RUN_ANIMATIONS",this.activeElement.uuid,e)},createRandomAnimate:function(t){var e;if("进入"===t)e=we["a"][0].children;else if("强调"===t)e=we["a"][1].children;else{if("退出"!==t)return-1;e=we["a"][2].children}var n=e.length;return console.log(n),e[Object(l["random"])(1,n-1)]},isdisClick:function(t){for(var e=0;e<Ce["a"].children.length;e++)if(t.value===Ce["a"].children[e].value)return"";this.handleChooseAnimate(t)}}},Ee=De,Se=(n("1d61"),n("576a"),Object(b["a"])(Ee,Oe,je,!1,null,"788dcd54",null)),_e=Se.exports,Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-attr-edit"},[n("el-scrollbar",{staticClass:"components-attr-edit"},[t.activeElementUUID?n("div",{staticClass:"attr-edit-inner"},[n("div",{staticClass:"animate-edit-btn-wrapper"},[n("el-dropdown",[n("el-button",{attrs:{type:"primary",size:"small"}},[t._v("\n            添加事件"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.eventTypeList,(function(e,i){return n("el-dropdown-item",{key:i},[n("div",{on:{click:function(n){return t.addEvent(e.value)}}},[t._v(t._s(e.label))])])})),1)],1),n("p",{staticClass:"gray inline-block fontsize-12 marginL10"},[t._v("事件在编辑模式下无效果")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.activeElement.events.length,expression:"activeElement.events.length"}],staticClass:"el-animate-list-wrapper paddingT20"},[n("el-collapse",{attrs:{accordion:""}},t._l(t.activeElement.events,(function(e,i){return n("el-collapse-item",{key:i},[n("template",{slot:"title"},[n("span",{staticClass:"el-animate-title-name"},[t._v("事件 "+t._s(i+1))]),n("div",{staticClass:"el-animate-title-type-wrapper"},[n("span",{staticClass:"el-animate-title-type"},[t._v(t._s(t._f("getLabelText")(e.type,t.eventTypeList)))])]),n("span",{staticClass:"el-animate-title-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteEvent(i)}}},[n("i",{staticClass:"el-icon-delete"})])]),n("div",{staticClass:"el-animate-item"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"share"!==e.type,expression:"item.type !== 'share'"}],staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("链接/接口url：")]),n("div",{staticClass:"col-1  attr-item-edit-input"},[n("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入url"},model:{value:e.url,callback:function(n){t.$set(e,"url",n)},expression:"item.url"}})],1)])])],2)})),1)],1)]):n("div",[n("p",{staticClass:"gray paddingT30 text-center"},[t._v("请在画板上选择需要编辑得元素")])])])],1)},$e=[];function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ae={name:"event-edit",data:function(){return{eventTypeList:[{label:"链接跳转",value:"link"},{label:"分享",value:"share"},{label:"表单提交",value:"submitForm"}]}},computed:Ve(Ve({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),Object(w["c"])(["currentPageIndex","activeElementIndex","activeElement","activePage"])),methods:{addEvent:function(t){this.$store.dispatch("addElementEvent",t)},deleteEvent:function(t){this.$store.dispatch("deleteElementEvent",t)}}},Te=Ae,ze=(n("a3ce"),Object(b["a"])(Te,Ue,$e,!1,null,"dfbbecb0",null)),qe=ze.exports,Fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-scrollbar",{staticClass:"components-attr-edit"},[n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("背景颜色：")]),n("div",{staticClass:"attr-item-edit-input no-top"},[n("el-color-picker",{attrs:{size:"mini","show-alpha":!0},model:{value:t.activePage.commonStyle.backgroundColor,callback:function(e){t.$set(t.activePage.commonStyle,"backgroundColor",e)},expression:"activePage.commonStyle.backgroundColor"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("场景时长：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:1e3,step:.1},model:{value:t.activePage.data.duration,callback:function(e){t.$set(t.activePage.data,"duration",e)},expression:"activePage.data.duration"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("过渡动画：")]),n("pageTrans",{model:{value:t.activePage.data.trans,callback:function(e){t.$set(t.activePage.data,"trans",e)},expression:"activePage.data.trans"}})],1),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("过渡动画时长：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,max:1e3,step:.1},model:{value:t.activePage.data.transDuration,callback:function(e){t.$set(t.activePage.data,"transDuration",e)},expression:"activePage.data.transDuration"}})],1)]),n("div",{staticClass:"attr-item-edit-wrapper"},[n("p",{staticClass:"attr-item-title"},[t._v("视频尺寸：")]),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.projectData.width,callback:function(e){t.$set(t.projectData,"width",e)},expression:"projectData.width"}}),n("div",{staticClass:"attr-item-edit-input-des"},[t._v("宽度")])],1),n("div",{staticClass:"col-2 attr-item-edit-input"},[n("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.projectData.height,callback:function(e){t.$set(t.projectData,"height",e)},expression:"projectData.height"}}),n("div",{staticClass:"attr-item-edit-input-des"},[t._v("高度")])],1)])])},Ne=[],Re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1)},Le=[],Be=["Fat","Lens","Shake","Slice","Stretch","Fluidly","BackOff","Oblique","MoveLeft","Windows4","Colorful","Magnifier","Tetrapod","Sunflower","ZoomRight","Radiation","WaterWave","HangAround","FastSwitch","WindowShades","CircleCrop","TricolorCircle","Quicksand"],He={props:{value:{type:String,default:""}},components:{},data:function(){return{tempValue:"",options:Be.map((function(t){return{value:t,label:t}}))}},mounted:function(){this.tempValue=this.value},methods:{},watch:{value:function(t){this.tempValue=t},tempValue:function(){this.$emit("input",this.tempValue)}}},Me=He,We=Object(b["a"])(Me,Re,Le,!1,null,"1c35ac6a",null),Ke=We.exports;function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ye={components:{pageTrans:Ke},computed:Xe(Xe({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),Object(w["c"])(["activePage"])),methods:{}},Qe=Ye,Ze=(n("2452"),Object(b["a"])(Qe,Fe,Ne,!1,null,"2fc47c5c",null)),Ge=Ze.exports,tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-script-edit"},[n("p",{staticClass:"page-title fontBold"},[t._v("脚本编辑")]),n("p",{staticClass:"gray paddingL10 fontsize-12"},[t._v("js脚本在编辑模式下无效果")]),n("div",{staticClass:"paddingT20"},[n("el-input",{attrs:{type:"textarea",rows:20,placeholder:"请输入代码"},model:{value:t.projectData.script,callback:function(e){t.$set(t.projectData,"script",e)},expression:"projectData.script"}})],1)])},en=[];function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function an(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rn={computed:an(an({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),Object(w["c"])(["currentPageIndex","activeElementIndex","activeElement","activePage"]))},on=rn,cn=Object(b["a"])(on,tn,en,!1,null,"7fcf2e32",null),sn=cn.exports,ln=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"components-contrl-bar"},[n("div",{staticClass:"button-item scale-wrappper"},[n("span",{staticClass:"scale-btn",on:{click:function(e){return t.updateScale("reduce")}}},[n("i",{staticClass:"el-icon-zoom-out"})]),n("span",{staticClass:"scale-input"},[t._v(t._s(parseFloat(100*t.scaleValue).toFixed(0))+"%")]),n("span",{staticClass:"scale-btn",on:{click:function(e){return t.updateScale("plus")}}},[n("i",{staticClass:"el-icon-zoom-in"})])]),n("div",{staticClass:"button-item",class:{disabled:!t.canUndo},on:{click:t.editorUndo}},[n("i",{staticClass:"iconfont iconundo1"}),n("p",[t._v("撤销")])]),n("div",{staticClass:"button-item",class:{disabled:!t.canRedo},on:{click:t.editorRedo}},[n("i",{staticClass:"iconfont iconredo1"}),n("p",[t._v("重做")])]),n("UploadPsd",{on:{"upload-success":t.uploadSuccessPsd}},[n("div",{staticClass:"button-item"},[n("i",{staticClass:"iconfont iconps"}),n("p",[t._v("导入psd")])])]),n("div",{staticClass:"button-item",on:{click:t.save}},[n("i",{staticClass:"iconfont iconbaocun"}),n("p",[t._v("保存")])]),n("div",{staticClass:"button-item",on:{click:t.showPreviewFn}},[n("i",{staticClass:"iconfont iconyulan"}),n("p",[t._v("预览")])]),n("div",{staticClass:"button-item",on:{click:t.publishFn}},[n("i",{staticClass:"iconfont iconfabu"}),n("p",[t._v("发布")])])],1)},un=[],pn=n("e7ec");function mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mn(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fn={components:{UploadPsd:pn["a"]},props:{loading:{type:Boolean,default:!1},scale:{type:Number,default:1}},data:function(){return{scaleValue:1}},computed:dn({},Object(w["c"])(["canUndo","canRedo"])),created:function(){this.scaleValue=this.scale},methods:dn(dn({},Object(w["b"])(["editorUndo","editorRedo"])),{},{updateScale:function(t,e){"plus"===t?this.scaleValue=this.scaleValue+(e||.1)>2?2:this.scaleValue+(e||.1):"reduce"===t?this.scaleValue=this.scaleValue-(e||.1)>.5?this.scaleValue-(e||.1):.5:"reset"===t&&(this.scaleValue=e||1),this.$emit("update:scale",this.scaleValue)},uploadSuccessPsd:function(t){this.$emit("import-psd-data",t)},save:function(){this.$emit("save")},publishFn:function(){this.$emit("publish")},showPreviewFn:function(){this.$emit("showPreviewFn")},cancelFn:function(){this.$emit("cancel")}})},hn=fn,vn=(n("6309"),Object(b["a"])(hn,ln,un,!1,null,"57db4dbc",null)),bn=vn.exports,gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.showVideo?t._e():n("el-progress",{staticClass:"loader",attrs:{"stroke-width":10,percentage:t.percent}}),n("previewWrapper",{attrs:{pageData:t.pageData,videoUrl:t.videoUrl,showVideo:t.showVideo},on:{closePanel:t.closePanel}}),n("screenshotLayer",{on:{making:t.making}})],1)},yn=[],On=n("a1a8"),jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"con",staticClass:"screenshot-layer"},t._l(t.pagesData.pages,(function(e,i){return n("div",{key:e.uuid,staticClass:"slayer-page",style:{width:t.pagesData.width+"px",height:t.pagesData.height+"px"},attrs:{id:"slayer-p-"+i}},[n("div",{staticClass:"page-preview-wrapper",style:t.getCommonStyle(e.commonStyle),attrs:{id:"slayer-pw-"+i}},t._l(e.elements,(function(e){return n(e.elName,t._b({key:e.uuid,tag:"component",staticClass:"element-on-edit-pane",style:t.getCommonStyle(Object.assign({},e.commonStyle,{width:e.commonStyle.width,height:e.commonStyle.height,left:e.commonStyle.left,top:e.commonStyle.top,position:e.commonStyle.position})),attrs:{uuid:e.uuid,id:"slayer-e-"+e.uuid,defaultStyle:e.commonStyle}},"component",e.propsValue,!1))})),1)])})),0)},wn=[],Cn=(n("7514"),n("ae4b")),Pn=n.n(Cn),xn=n("e409"),kn=n.n(xn),Dn=n("dc4f"),En=n.n(Dn);function Sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Un={name:"screenshot-layer",components:_n({},m["a"]),computed:_n({},Object(w["d"])({projectData:function(t){return t.editor.projectData}})),created:function(){Pe["a"].$on("publish",this.publishFun)},beforeDestroy:function(){Pe["a"].$off("publish",this.publishFun),this.pagesData={pages:[]}},data:function(){return{getCommonStyle:z["a"].getCommonStyle,pagesData:{pages:[]},videoData:[],folderId:1}},methods:{publishFun:function(){var t=this;this.reset(),this.pagesData=z["a"].processingProjectData(this.projectData),this.videoData=z["a"].cloneToVideoData(this.projectData),this.$nextTick(Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.folderId=Pn.a.gen(),n=t.groupingPagesData(t.pagesData),i=t.rearrangeDom(n),e.next=5,t.screenshotAndUpload(i);case 5:return a=e.sent,r=t.updateVideoData(a),e.next=9,En.a.set(1e3);case 9:t.beginMakingVideo(r);case 10:case"end":return e.stop()}}),e)}))))},updateVideoData:function(t){if(!t)return this.videoData;for(var e=0;e<t.length;e++){var n=t[e],i=n.id,a=n.url,r=n.localPath,o=z["a"].getDataByKeyFromVideoData(this.videoData,i);o&&(o.propsValue.imageSrc=a,o.propsValue.localPath=r)}return this.videoData},beginMakingVideo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$API.beginMakeVideo({videoData:e,folderId:this.folderId,id:this.$route.query.id});case 2:n=t.sent,200===n.code&&(i=n.body,a=i.taskId,r=i.uuid,this.getProgressing({taskId:a,uuid:r}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getProgressing:function(t){var e=this,n=t.taskId,i=t.uuid,a=0,o=500,c=1e5/o,s=setInterval(Object(r["a"])(regeneratorRuntime.mark((function t(){var r,o,l,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.getVideoPercent({taskId:n,uuid:i,id:e.$route.query.id});case 2:r=t.sent,200==r.code?(o=r.body,l=o.progress,u=o.state,p=o.videoUrl,"complete"===u&&(clearInterval(s),e.updateData({videoUrl:p})),e.$emit("making",{progress:l,state:u,videoUrl:p})):clearInterval(s),a>c&&clearInterval(s),a++;case 6:case"end":return t.stop()}}),t)}))),o)},updateData:function(t){var e=t.videoUrl;this.projectData.videoUrl=e,this.$API.updatePage({pageData:this.projectData})},screenshotAndUpload:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,r,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],i=0;case 2:if(!(i<e.length)){t.next=13;break}return a=e[i],t.next=6,this.screenshots(a,i);case 6:if(r=t.sent,!Object(l["isEmpty"])(r)){t.next=9;break}return t.abrupt("continue",10);case 9:for(o=0;o<r.length;o++)c=r[o],n.push(c);case 10:i++,t.next=2;break;case 13:return t.next=15,this.uploadAllImages(n);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),uploadAllImages:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Object(l["isEmpty"])(e)){t.next=2;break}return t.abrupt("return");case 2:return n=new FormData,Object(l["forEach"])(e,(function(t,e){n.append("file".concat(e),t.file),n.append("data".concat(e),t.id)})),n.append("folder",this.folderId),n.append("id",String(this.$route.query.id)),t.next=8,this.$API.uploadMultipleImages(n);case 8:if(i=t.sent,!i.status){t.next=11;break}return t.abrupt("return",i.body);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),screenshots:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var i,a,r,o,c,s,u,p=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Object(l["isEmpty"])(e)){t.next=2;break}return t.abrupt("return");case 2:return i=this.$refs.con,a=this.pagesData,r=a.width,o=a.height,c=e.map((function(t){return[r,o]})),t.next=7,N()(i,{elements:e,size:c,scale:1,x:0,y:0,allowTaint:!0,removeContainer:!0,backgroundColor:null,proxy:"/quark/html2canvas/corsproxy"});case 7:return s=t.sent,u=[],Object(l["forEach"])(s,(function(t,e){var i="image-".concat(n,"-").concat(e),a=p.$mUtils.canvasToFile({name:i,canvas:t,quality:.9,type:"png"});u.push(a)})),t.abrupt("return",u);case 11:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),groupingPagesData:function(t){for(var e=this,n=[],i=function(t){var e=!1;if("qk-image"===t.elName){console.log(t.propsValue.imageSrc);var n=t.propsValue.imageSrc.split(".").pop();"gif"===n&&(e=!0)}return!Object(l["isEmpty"])(t.animations)||"qk-video"===t.elName||"qk-image-carousel"===t.elName||e||"qk-subtitle"===t.elName},a=function(a){for(var r=t.pages[a],o=e.videoData.pages[a],c=[],s=[],u=0,p=function(){Object(l["isEmpty"])(s)||(c.push(Object(l["clone"])(s)),o.elements.push({elName:"qk-image",isFFImage:!0,index:u,commonStyle:{width:t.width,height:t.height},key:"image-".concat(a,"-").concat(u),propsValue:{imageSrc:null}}),u++),s.length=0},m=0;m<r.elements.length;m++){var d=r.elements[m];i(d)?(p(),c.push(d.uuid),o.elements.push(Object(l["cloneDeep"])(d))):s.push(d.uuid)}p(),n.push(c)},r=0;r<t.pages.length;r++)a(r);return n},rearrangeDom:function(t){for(var e=[],n=this.$refs.con,i=0;i<t.length;i++){var a=t[i],r=[];e.push(r);for(var o=0;o<a.length;o++){var c=a[o];if(Object(l["isArray"])(c)){var s=this.createElesCon(o);kn()(n).find("#slayer-pw-".concat(i)).append(s),r.push(s.get(0));for(var u=0;u<c.length;u++)s.append(kn()(n).find("#slayer-e-".concat(c[u])))}else kn()(n).find("#slayer-e-".concat(c)).css("display","none")}}return e},createElesCon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99,e=this.pagesData,n=e.width,i=e.height;return kn()("<div></div>").addClass("slayer-page page-con").css({width:n+"px",height:i+"px",zIndex:t+100,position:"absolute",overflow:"hidden",top:0,left:0})},reset:function(){this.pagesData={pages:[]},this.videoData=[]}}},$n=Un,In=(n("8012"),Object(b["a"])($n,jn,wn,!1,null,"3a82492c",null)),Vn=In.exports,An={components:{previewWrapper:On["a"],screenshotLayer:Vn},props:{pageData:{type:Object,require:!0}},data:function(){return{percent:0,showVideo:!1,videoUrl:null}},mounted:function(){Pe["a"].$on("publish",this.publishFun)},beforeDestroy:function(){Pe["a"].$off("publish",this.publishFun)},methods:{closePanel:function(){this.$emit("closePanel",!1)},publishFun:function(){this.percent=0},saveFn:function(){this.$emit("saveFn")},making:function(t){var e=t.progress,n=t.state,i=t.videoUrl;this.percent=100*e,"complete"===n&&(this.showVideo=!0,this.videoUrl=i)}}},Tn=An,zn=(n("bab5"),Object(b["a"])(Tn,gn,yn,!1,null,"589ff6ef",null)),qn=zn.exports;function Fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fn(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Rn={components:{componentLibs:y,pageManage:E,templateLibs:V,editorPan:W,attrEdit:ye,animationEdit:_e,eventEdit:qe,pageAttrEdit:Ge,scriptEdit:sn,controlBar:bn,makingPanel:qn},data:function(){return{id:"",loading:!1,showMakingPanel:!1,activeAttr:"属性",activeSideBar:"componentLibs",sidebarMenus:[{label:"页面管理",value:"pageManage",elementUiIcon:"el-icon-document"},{label:"组件列表",value:"componentLibs",elementUiIcon:"el-icon-s-operation"}],canvasConfig:{scale:1}}},computed:Nn(Nn({},Object(w["d"])({projectData:function(t){return t.editor.projectData},activePageUUID:function(t){return t.editor.activePageUUID},activeElementUUID:function(t){return t.editor.activeElementUUID}})),{},{kj_token:function(){return this.$store.state.user.kj_token}}),created:function(){this.$store.dispatch("setPrjectData"),this.id=this.$route.query.id,this.initPageData()},methods:{initPageData:function(){var t=this;this.loading=!0,this.$API.getPageDetail({pageId:this.id}).then((function(e){t.loading=!1,t.$store.dispatch("setPrjectData",Nn({},e.body))})).catch((function(){t.loading=!1}))},saveFn:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=function(t){n.$API.updatePage({pageData:t}).then((function(){n.$message.success("保存成功!"),n.showMakingPanel=!1}))},this.$prompt("请输入标题","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.projectData.title}).then((function(t){var i=t.value,a=Nn(Nn({},n.projectData),{},{title:i});e(a)})).catch((function(){}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),publishFn:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.projectData.videoUrl){t.next=3;break}return this.$message.warning("请先预览生成视频,然后发布"),t.abrupt("return");case 3:this.$API.uploadvideo({videourl:location.origin+this.projectData.videoUrl},{Authorization2:this.kj_token}).then((function(){e.$message.success("上传到素材库成功")}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showPreviewFn:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.screenshots();case 2:e=Nn(Nn({},this.projectData),{},{isPublish:!1}),this.showMakingPanel=!0,this.$API.updatePage({pageData:e}),this.$nextTick((function(){return Pe["a"].$emit("publish")}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancelFn:function(){var t=this;this.$confirm("确认退出编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({name:"Home"})})).catch((function(){}))},screenshots:function(){var t=this,e=document.querySelector("#canvas-panel");new Promise((function(n,i){N()(e,{proxy:"".concat(t.$config.baseURL,"/common/html3canvas/corsproxy")}).then((function(e){var n=e.toDataURL("image/jpeg");t.$store.commit("updateCoverImage",n)}))}))},importPsdData:function(t){var e=this,n=t.elements,i=t.document.width,a=this.projectData.width/i;n.forEach((function(t){var n=t.width,i=t.height,r=t.top,o=t.left,c=t.imageSrc,s=t.opacity,l=t.zIndex;setTimeout((function(){e.$store.dispatch("addElement",{elName:"qk-image",defaultStyle:{width:n*a,height:i*a,top:r*a,left:o*a,zIndex:l,opacity:s},needProps:{imageSrc:c}})}),10)}))},onContextmenu:function(t){return t.preventDefault(),!1}}},Ln=Rn,Bn=(n("b328"),n("fed7"),Object(b["a"])(Ln,i,a,!1,null,"11f9ffb3",null));e["default"]=Bn.exports},fed7:function(t,e,n){"use strict";n("62fd")}}]);