(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2818e179"],{"0805":function(t,e,a){"use strict";a("7c16")},"092d":function(t,e,a){"use strict";a("5df32")},"11d2":function(t,e,a){t.exports=a.p+"bundle/fonts/云峰飞云体.3004b5f5.ttf"},"1d72":function(t,e,a){},"1f1d":function(t,e,a){},"2c77":function(t,e,a){},"300c":function(t){t.exports=JSON.parse('{"shareConfig":{"coverImage":"","title":"这是#分享者#的大力推荐","description":"这是#分享者#大力推荐的H5"},"title":"模板demo1","videoUrl":"\\\\resource\\\\videos\\\\str0eqbf58esuv1y.mp4","coverImage":"","description":"我用可视化编辑器做了一个超酷炫的视频，快来看看吧。","script":"","width":384,"height":682,"pageMode":"h5","flipType":0,"slideNumber":false,"status":1,"isPublish":false,"isTemplate":false,"members":[],"version":5,"_id":"62c3d759768af80ff896de88","pages":[{"uuid":"0777edf9-05ae-4cb0-b42c-db4583036136","name":"","elements":[{"uuid":"ea64fc78-b8a7-4bba-8368-d5d7902e3d1a","elName":"qk-image","animations":[],"commonStyle":{"position":"absolute","width":384,"height":685,"top":2,"left":0,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":1},"events":[],"propsValue":{"imageSrc":"\\\\resource\\\\files\\\\3sFJjfpvvyr.png"},"valueType":"String","tag":{"text":[],"type":1}},{"uuid":"9055a42b-09f9-4484-8d79-cd3f9bc5bb25","elName":"qk-video","animations":[{"type":"fadeInLeft","duration":1.5,"infinite":"","interationCount":1,"delay":0.5}],"commonStyle":{"position":"absolute","width":287,"height":188,"top":160,"left":47,"rotate":0,"paddingTop":10,"paddingLeft":0,"paddingRight":0,"paddingBottom":10,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":2},"events":[],"propsValue":{"videoSrc":"/static/demo/demo.mp4"},"valueType":"String","tag":{"text":["门头"],"type":1}},{"uuid":"9c31d064-378b-4642-8cd8-893b22aa1522","elName":"qk-video","animations":[{"type":"fadeInLeft","duration":1.5,"infinite":"","interationCount":1,"delay":0.5}],"commonStyle":{"position":"absolute","width":287,"height":188,"top":391,"left":49,"rotate":0,"paddingTop":10,"paddingLeft":0,"paddingRight":0,"paddingBottom":10,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":3},"events":[],"propsValue":{"videoSrc":"/static/demo/demo.mp4"},"valueType":"String","tag":{"text":["门头"],"type":1}},{"uuid":"761dbb2d-e281-4668-9aad-f6ce44760370","elName":"qk-image","animations":[],"commonStyle":{"position":"absolute","width":151,"height":103,"top":123,"left":3,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":4},"events":[],"propsValue":{"imageSrc":"\\\\resource\\\\files\\\\3sFMlGvOgpu.gif"},"valueType":"String","tag":{"text":[],"type":1}},{"uuid":"b9d68770-628d-4097-944f-c483228caf0b","elName":"qk-text","animations":[],"commonStyle":{"position":"absolute","width":384,"height":40,"top":356,"left":-1,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":5,"font-family":"YaoSuiXinShouXieTi-2"},"events":[],"propsValue":{"text":"这个店真不错奥","font":"YaoSuiXinShouXieTi-2"},"valueType":"String","tag":{"text":[],"type":1}},{"uuid":"8b85e468-d494-426b-a3a4-d406d6a0b1a0","elName":"qk-text","animations":[],"commonStyle":{"position":"absolute","width":384,"height":40,"top":587,"left":-7,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":6,"font-family":"QingSongShouXieTi2-2"},"events":[],"propsValue":{"text":"这个店真不错奥","font":"QingSongShouXieTi2-2"},"valueType":"String","tag":{"text":[],"type":1}}],"commonStyle":{"backgroundColor":"rgba(238, 122, 14, 1)","backgroundImage":"","backgroundSize":"cover"},"data":{"time":2,"duration":3,"trans":"Colorful","transDuration":1.5,"backgroundColor":"rgba(238, 122, 14, 1)"}},{"uuid":"d6d5c562-b08c-4660-b24b-7c0bd6bb9ab7","name":"","elements":[{"uuid":"4525d8a4-1f2e-40d8-a1b8-9df0a88eff94","elName":"qk-image","animations":[],"commonStyle":{"position":"absolute","width":384,"height":685,"top":2,"left":0,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":1},"events":[],"propsValue":{"imageSrc":"\\\\resource\\\\files\\\\3sFJjfpvvyr.png"},"valueType":"String","tag":{"text":["店内"],"type":1}},{"uuid":"908bc7d3-a59c-45ae-a060-317f6e33399d","elName":"qk-video","animations":[{"type":"fadeInLeft","duration":1.5,"infinite":"","interationCount":1,"delay":0.5}],"commonStyle":{"position":"absolute","width":287,"height":188,"top":159,"left":47,"rotate":0,"paddingTop":10,"paddingLeft":0,"paddingRight":0,"paddingBottom":10,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":2},"events":[],"propsValue":{"videoSrc":"/static/demo/demo.mp4"},"valueType":"String","tag":{"text":["店内"],"type":1}},{"uuid":"6610ae29-90c9-4c21-a6ab-8174c960a904","elName":"qk-video","animations":[{"type":"fadeInLeft","duration":1.5,"infinite":"","interationCount":1,"delay":0.5}],"commonStyle":{"position":"absolute","width":287,"height":188,"top":391,"left":49,"rotate":0,"paddingTop":10,"paddingLeft":0,"paddingRight":0,"paddingBottom":10,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":3},"events":[],"propsValue":{"videoSrc":"/static/demo/demo.mp4"},"valueType":"String","tag":{"text":["店内"],"type":1}},{"uuid":"dd0ffdf8-7f7b-4de4-8f45-12ce3859991f","elName":"qk-image","animations":[{"type":"fadeInDown","duration":1.5,"infinite":"","interationCount":1,"delay":0.5}],"commonStyle":{"position":"absolute","width":151,"height":103,"top":123,"left":3,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":4},"events":[],"propsValue":{"imageSrc":"\\\\resource\\\\files\\\\3sFMlGvOgpu.gif"},"valueType":"String","tag":{"text":[],"type":1}},{"uuid":"75a670b2-a27e-47bb-831b-6b7a208ab9dd","elName":"qk-text","animations":[],"commonStyle":{"position":"absolute","width":384,"height":40,"top":359,"left":3,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":5,"font-family":"AZhuPaoPaoTi-2"},"events":[],"propsValue":{"text":"好吃!","font":"AZhuPaoPaoTi-2"},"valueType":"String","tag":{"text":[],"type":1}},{"uuid":"c170336d-c79c-43f2-997b-f3cbabc4929d","elName":"qk-text","animations":[],"commonStyle":{"position":"absolute","width":384,"height":40,"top":588,"left":-3,"rotate":0,"paddingTop":0,"paddingLeft":0,"paddingRight":0,"paddingBottom":0,"marginTop":0,"marginLeft":0,"marginRight":0,"marginBottom":0,"borderWidth":0,"borderColor":"","borderStyle":"solid","borderRadius":0,"boxShadow":"","fontSize":16,"fontWeight":500,"lineHeight":1.4,"letterSpacing":0,"textAlign":"center","color":"#000000","backgroundColor":"","backgroundImage":"","backgroundSize":"cover","opacity":1,"zIndex":6,"font-family":"Muyao-Softbrush-2"},"events":[],"propsValue":{"text":"好!","font":"Muyao-Softbrush-2"},"valueType":"String","tag":{"text":[],"type":1}}],"commonStyle":{"backgroundColor":"rgba(238, 122, 14, 1)","backgroundImage":"","backgroundSize":"cover"},"data":{"time":2,"duration":3,"trans":"WaterWave","transDuration":1.5,"backgroundColor":"rgba(238, 122, 14, 1)"}}],"author":"62b43cbf8ccb0850bce8cfdd","created":"2022-07-05T06:16:57.782Z","updated":"2022-07-05T06:34:00.610Z","__v":0}')},3322:function(t,e,a){},"33f6":function(t,e,a){},"42c6":function(t,e,a){},"439a":function(t,e,a){},"4ed5":function(t,e,a){},5287:function(t,e,a){},"5cc2":function(t,e,a){},"5df32":function(t,e,a){},6064:function(t,e,a){"use strict";a("1f1d")},"637c":function(t,e,a){"use strict";a("be83")},"67e6":function(t,e,a){"use strict";a("42c6")},"68cc":function(t,e,a){},"6a47":function(t,e,a){"use strict";a("5cc2")},"7c16":function(t,e,a){},8749:function(t,e,a){t.exports=a.p+"bundle/fonts/云峰静龙行书.f6f65d9f.ttf"},"981c":function(t,e,a){},"9bcf":function(t,e,a){"use strict";a("981c")},a19b:function(t,e,a){"use strict";a("1d72")},a361:function(t,e,a){"use strict";a("f21d")},ac16:function(t,e,a){"use strict";a("c96e")},ac6a4:function(t,e,a){"use strict";a("439a")},b03a:function(t,e,a){var n={"./Aa剑豪体.ttf":"cf0b","./云峰静龙行书.ttf":"8749","./云峰飞云体.ttf":"11d2","./今年也要加油鸭.ttf":"f3a3"};function i(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id="b03a"},be83:function(t,e,a){},c184:function(t,e,a){},c408:function(t,e,a){},c96e:function(t,e,a){},cf0b:function(t,e,a){t.exports=a.p+"bundle/fonts/Aa剑豪体.bf39f33c.ttf"},de39:function(t,e,a){"use strict";a("33f6")},e609:function(t,e,a){"use strict";a("2c77")},e72c:function(t,e,a){"use strict";a("4ed5")},e8ff:function(t,e,a){"use strict";a("3322")},e918:function(t,e,a){"use strict";a("c184")},eac1:function(t,e,a){"use strict";a("5287")},ec31:function(t,e,a){"use strict";a("68cc")},ee0a:function(t,e,a){"use strict";a("c408")},f21d:function(t,e,a){},f3a3:function(t,e,a){t.exports=a.p+"bundle/fonts/今年也要加油鸭.fd17d5b3.ttf"},f845:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"page-editor editor-wrapper"},[a("div",{staticClass:"editor-side-bar border-R"},[a("el-tabs",{staticStyle:{height:"100%"},attrs:{"tab-position":"left"},on:{"tab-click":t.handleTabChange}},t._l(t.sidebarMenus,(function(e,n){return a("el-tab-pane",{key:n,attrs:{name:e.value,label:e.value}},[a("el-tooltip",{staticClass:"item",attrs:{slot:"label",effect:"dark",content:e.label,placement:"right"},slot:"label"},[a("div",{staticClass:"tooltip-text"},[a("i",{class:e.elementUiIcon}),a("span",{staticStyle:{"margin-left":"-16px","font-size":"8px"}},[t._v(t._s(e.label))])])])],1)})),1)],1),a("div",{staticClass:"editor-page-edit-wrapper"},["componentLibs"===t.activeSideBar?a("componentLibs"):t._e(),"pageManage"===t.activeSideBar?a("pageManage"):t._e(),"templateLibs"===t.activeSideBar?a("templateLibs"):t._e()],1),a("div",{staticClass:"editor-main",on:{contextmenu:t.onContextmenu}},[a("div",{staticClass:"control-bar-wrapper"},[a("controlBar",{attrs:{scale:t.canvasConfig.scale},on:{"update:scale":function(e){return t.$set(t.canvasConfig,"scale",e)},"import-psd-data":t.importPsdData,cancel:t.cancelFn,publish:t.publishFn,save:t.saveFn}})],1),a("editorPan",{attrs:{scale:t.canvasConfig.scale},on:{"update:scale":function(e){return t.$set(t.canvasConfig,"scale",e)}}})],1),a("div",{staticClass:"el-attr-edit-wrapper scrollbar-wrapper"},[a("el-tabs",{attrs:{stretch:""},model:{value:t.activeAttr,callback:function(e){t.activeAttr=e},expression:"activeAttr"}},[a("el-tab-pane",{attrs:{label:"属性",name:"属性"}},[a("attrEdit")],1),a("el-tab-pane",{attrs:{label:"动画",name:"动画"}},[a("animationEdit")],1),a("el-tab-pane",{attrs:{label:"页面设置",name:"页面属性"}},[a("pageAttrEdit")],1)],1)],1),t.showMakingPanel?a("makingPanel",{attrs:{pageData:t.projectData},on:{closePanel:function(e){t.showMakingPanel=!1},saveFn:t.saveFn}}):t._e()],1)},i=[],o=(a("8e6e"),a("456d"),a("7f7f"),a("ac6a"),a("96cf"),a("1da1")),r=a("ade3"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-libs-wrapper scrollbar-wrapper"},[a("p",{staticClass:"page-title text-center"},[t._v("组件库")]),a("el-scrollbar",{staticStyle:{height:"100%"}},[a("ul",{staticClass:"scrollbar-wrapper"},t._l(t.componentsList,(function(e,n){return a("li",{key:n,staticClass:"clearfix paddingB30"},[a("div",{staticClass:"components-libs-title"},[a("p",[t._v(t._s(e.title))])]),e.components&&e.components.length?a("div",t._l(e.components,(function(e,n){return a("div",{key:n,staticClass:"components-lib-item",on:{click:function(a){return t.handleClick(e)}}},[a("div",{staticClass:"lib-item-img"},[a("i",{class:[e.icon]})]),a("p",{staticClass:"lib-item-title"},[t._v(t._s(e.title))])])})),0):a("div",[a("p",{staticClass:"gray text-center paddingT20"},[t._v("待完善...")])])])})),0)])],1)},l=[],s=(a("6762"),a("2fdb"),a("2ef0")),p=a("9b2a"),u=[{title:"基础组件",components:[{elName:"qk-text",title:"文字",icon:"iconfont iconwenben",valueType:"",defaultStyle:{height:40}},{elName:"qk-subtitle",title:"字幕",icon:"iconfont iconwenben",valueType:"",defaultStyle:{height:40}},{elName:"qk-image",title:"图片",icon:"iconfont icontupian",valueType:"",defaultStyle:{height:200}},{elName:"qk-rectangle-border",title:"纯色方块",icon:"iconfont iconjuxing",valueType:"",defaultStyle:{width:200,height:200}},{elName:"qk-rectangle-border",title:"分割线",icon:"iconfont icon758bianjiqi_fengexian",valueType:"",defaultStyle:{height:1,width:300,backgroundColor:"#999999"}},{elName:"qk-image-carousel",title:"图片相册",icon:"iconfont iconshouyelunbotu",valueType:"",defaultStyle:{height:210}},{elName:"qk-video",title:"视频",icon:"iconfont iconshipin",valueType:"",defaultStyle:{width:p["a"].canvasH5Width,height:300,paddingTop:10,paddingBottom:10}}]},{title:"功能组件",components:[{elName:"qk-bg-music",title:"音乐",icon:"iconfont iconyinlemusic217",valueType:"",defaultStyle:{height:52,width:52}}]},{title:"业务组件",components:[]}],m=a("03ce");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}window._qk_register_components_object=m["a"];var h={name:"component-libs",data:function(){return{componentsList:u}},methods:{handleClick:function(t){var e=this.getComponentProps(t.elName);this.$store.dispatch("template/addElement",f(f({},t),{},{needProps:e}))},getComponentProps:function(t){var e;for(var a in m["a"])if(a.toLowerCase()===Object(s["camelCase"])(t).toLowerCase()){e=m["a"][a];break}if(!e)return{};var n={};for(var i in e.props)n[i]=[Object,Array].includes(e.props[i].type)?e.props[i].default():e.props[i].default;return n}}},g=h,v=(a("ac16"),a("0c7c")),b=Object(v["a"])(g,c,l,!1,null,"9114834a",null),y=b.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-page-manage scrollbar-wrapper"},[a("p",{staticClass:"page-title text-center"},[t._v("页面管理")]),a("el-scrollbar",{staticClass:"components-main-conten",staticStyle:{height:"100%"}},t._l(t.projectData.pages,(function(e,n){return a("div",{key:e.uuid,staticClass:"page-item clearfix",class:{active:t.activePageUUID===e.uuid},on:{click:function(a){return t.changeActivePage(e)}}},[a("div",{staticClass:"inline-block"},[a("span",{staticClass:"page-item-index"},[t._v(t._s(n+1))]),t._v("\n        第"+t._s(n+1)+"页\n      ")]),a("div",{staticClass:"page-item-btn-wrapper pull-right width20"},[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more-outline"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"btn-item",on:{click:function(a){return t.copyPage(e)}}},[a("i",{staticClass:"el-icon-document-copy"}),t._v(" 复制页面")])]),a("el-dropdown-item",[a("div",{staticClass:"btn-item",on:{click:function(a){return t.addPage(e)}}},[a("i",{staticClass:"el-icon-document-add"}),t._v(" 新增页面")])]),a("el-dropdown-item",[a("div",{staticClass:"btn-item",on:{click:function(a){return t.deletePage(e)}}},[a("i",{staticClass:"el-icon-delete"}),t._v(" 删除页面")])])],1)],1)],1)])})),0),a("div",{staticClass:"bottom-btn-wrapper"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addPage()}}},[t._v("新增空页面")])],1)],1)},j=[],w=a("2f62");function C(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?C(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var P={computed:S({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),methods:{changeActivePage:function(t){this.$store.dispatch("template/setActivePageUUID",t.uuid)},copyPage:function(t){this.$store.dispatch("template/copyPage",t.uuid)},addPage:function(t){this.$store.dispatch("template/addPage",t?t.uuid:"")},deletePage:function(t){this.$store.dispatch("template/deletePage",t.uuid)}}},x=P,k=(a("ac6a4"),Object(v["a"])(x,O,j,!1,null,"73161080",null)),D=k.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-libs-wrapper scrollbar-wrapper"},[a("p",{staticClass:"page-title text-center"},[t._v("新建模板\n    "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增一页",placement:"top-start"}},[a("el-button",{staticClass:"add-button",attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"small"},on:{click:function(e){return t.addPage()}}})],1)],1),a("el-scrollbar",{staticStyle:{height:"100%"}},[t._l(t.projectData.pages,(function(e,n){return a("div",{key:e.uuid,staticClass:"page-item clearfix",class:{active:t.activePageUUID===e.uuid},on:{click:function(a){return t.changeActivePage(e)}}},[a("div",{staticClass:"inline-block"},[a("span",{staticClass:"page-item-index"},[t._v(t._s(n+1))]),t._v("\n        第"+t._s(n+1)+"页\n      ")]),a("div",{staticClass:"page-item-btn-wrapper pull-right width20"},[a("el-dropdown",[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more-outline"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"btn-item",on:{click:function(a){return t.copyPage(e)}}},[a("i",{staticClass:"el-icon-document-copy"}),t._v(" 复制页面")])]),a("el-dropdown-item",[a("div",{staticClass:"btn-item",on:{click:function(a){return t.addPage(e)}}},[a("i",{staticClass:"el-icon-document-add"}),t._v(" 新增页面")])]),a("el-dropdown-item",[a("div",{staticClass:"btn-item",on:{click:function(a){return t.deletePage(e)}}},[a("i",{staticClass:"el-icon-delete"}),t._v(" 删除页面")])])],1)],1)],1)])})),a("ul",{staticClass:"scrollbar-wrapper"},t._l(t.componentsList,(function(e,n){return a("li",{key:n,staticClass:"clearfix paddingB30"},[a("div",{staticClass:"components-libs-title"},[a("p",[t._v(t._s(e.title))])]),e.components&&e.components.length?a("div",t._l(e.components,(function(e,n){return a("div",{key:n,staticClass:"components-lib-item",on:{click:function(a){return t.handleClick(e)}}},[a("div",{staticClass:"lib-item-img"},[a("i",{class:[e.icon]})]),a("p",{staticClass:"lib-item-title"},[t._v(t._s(e.title))])])})),0):a("div",[a("p",{staticClass:"gray text-center paddingT20"},[t._v("待完善...")])])])})),0)],2)],1)},_=[],U=a("300c");function I(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?I(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}window._qk_register_components_object=m["a"];var T={name:"component-libs",computed:$({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),data:function(){return{componentsList:u,text:U.pages[0].elements[2].propsValue.text,img:U.pages[0].elements[0].propsValue.imageSrcList}},methods:{handleClick:function(t){var e=this.getComponentProps(t.elName);this.$store.dispatch("template/addElement",$($({},t),{},{needProps:e}))},getComponentProps:function(t){var e;for(var a in m["a"])if(a.toLowerCase()===Object(s["camelCase"])(t).toLowerCase()){e=m["a"][a];break}if(!e)return{};var n={};for(var i in e.props)n[i]=[Object,Array].includes(e.props[i].type)?e.props[i].default():e.props[i].default;return n},addPage:function(t){this.$store.dispatch("template/addPage",t?t.uuid:"")},copyPage:function(t){this.$store.dispatch("template/copyPage",t.uuid)},deletePage:function(t){this.activePageUUID===t.uuid&&this.projectData.pages.length>1&&this.$store.dispatch("template/setActivePageUUID",this.projectData.pages[this.projectData.pages.indexOf(t)-1].uuid),this.$store.dispatch("template/deletePage",t.uuid)},changeActivePage:function(t){this.$store.dispatch("template/setActivePageUUID",t.uuid)},inputChangeText:function(){U.pages[0].elements[2].propsValue.text=this.text},inputChangeImg:function(){U.pages[0].elements[0].propsValue.imageSrcList[0]=this.img}}},V=T,A=(a("ee0a"),a("e609"),Object(v["a"])(V,E,_,!1,null,"4653d0c2",null)),z=A.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"editorPane",staticClass:"editor-pane",on:{click:t.handleClickCanvas,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleKeyup.apply(null,arguments)}}},[a("div",{staticClass:"editor-pane-inner"},[a("div",{staticClass:"editor-main",style:{transform:"scale("+t.scale+")",width:t.projectData.width+"px",height:t.projectData.height+"px"}},[a("div",{ref:"canvas-panel",staticClass:"page-preview-wrapper",style:t.getCommonStyle(t.activePage.commonStyle),attrs:{id:"canvas-panel"}},t._l(t.activePage.elements,(function(e){return a("edit-shape",{key:e.uuid,style:t.getCommonStyle({width:e.commonStyle.width,height:e.commonStyle.height,left:e.commonStyle.left,top:e.commonStyle.top,position:e.commonStyle.position}),attrs:{uuid:e.uuid,defaultStyle:e.commonStyle,active:e.uuid===t.activeElementUUID},on:{handleElementClick:function(a){return t.handleElementClick(e.uuid)},resize:t.handleElementResize}},[a(e.elName,t._b({tag:"component",staticClass:"element-on-edit-pane",style:t.getCommonStyle(Object.assign({},e.commonStyle,{top:0,left:0}))},"component",e.propsValue,!1))],1)})),1),a("div",{staticClass:"page-wrapper-mask"})]),a("div",{staticClass:"page-wrapper-menu-operation menu-item-on-edit-panel",class:{active:t.activeElementUUID},style:t.getMenuOptionsPositionStyle},t._l(t.menuOptions,(function(e,n){return a("el-tooltip",{key:n,attrs:{effect:"dark",content:e.title,placement:"right"}},[a("div",{staticClass:"menu-item menu-item-on-edit-panel",on:{click:function(a){return t.handleElementCommand(e.value)}}},[a("i",{staticClass:"menu-item-on-edit-panel",class:[e.icon]})])])})),1)])])},R=[],L=(a("c5f6"),a("1336"),a("d71a")),q=a("a402"),N=a("fbb0"),B=a.n(N);function W(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function H(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?W(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}window._qk_register_components_object=m["a"];var M={props:{scale:{type:Number,default:1}},components:H(H({},m["a"]),{},Object(r["a"])({},q["a"].name,q["a"])),data:function(){return{getCommonStyle:L["a"].getCommonStyle,menuOptions:[{title:"复制",icon:"iconfont iconfuzhi",value:"copy"},{title:"删除",icon:"iconfont iconshanchu",value:"delete"},{title:"字体放大",icon:"iconfont iconzitifangda",value:"fontA+"},{title:"字体缩小",icon:"iconfont iconzitisuoxiao",value:"fontA-"},{title:"字体加粗",icon:"iconfont iconzitijiacu",value:"fontB"},{title:"图层上移",icon:"iconfont iconziyuan1",value:"layerUp"},{title:"图层下移",icon:"iconfont iconxiayiyiceng",value:"layerDown"},{title:"图层置顶",icon:"iconfont iconcontrol-top",value:"layerTop"},{title:"图层置底",icon:"iconfont iconcontrol-bottom",value:"layerBottom"}],editorPaneWidth:0}},computed:H(H(H({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement","activePage"])),{},{getMenuOptionsPositionStyle:function(){var t=60,e=this.activeElementUUID,a=this.$refs.editorPane?this.$refs.editorPane.offsetWidth:0,n=(a-this.projectData.width*this.scale)/2-(t+15),i=n<t?16:n;return{cid:e,right:i+"px"}}}),mounted:function(){this.editorPaneWidth=this.$refs.editorPane.offsetWidth},methods:{handleElementClick:function(t){this.$store.dispatch("template/setActiveElementUUID",t)},handleElementResize:function(t){t?(this.projectData.pages[this.currentPageIndex].elements[this.activeElementIndex].commonStyle.left=t.left,this.projectData.pages[this.currentPageIndex].elements[this.activeElementIndex].commonStyle=H({},t)):this.$store.dispatch("template/addHistoryCache")},handleClickCanvas:function(t){t.target.classList.contains("element-on-edit-pane")||t.target.classList.contains("menu-item-on-edit-panel")||this.$store.dispatch("template/setActiveElementUUID","")},handleElementCommand:function(t){this.$store.dispatch("template/elementCommand",t)},handleKeyup:function(t){},screenshots:function(){var t=this,e=document.querySelector("#canvas-panel");B()(e,{width:375,height:667,proxy:"/quark/html2canvas/corsproxy"}).then((function(e){var a=e.toDataURL("image/jpeg");t.$store.commit("template/updateCoverImage",a)}))}}},X=M,J=(a("a361"),Object(v["a"])(X,F,R,!1,null,"2713ea58",null)),Z=J.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-scrollbar",{staticClass:"components-attr-edit"},[t.activeElementUUID?a("div",{staticClass:"attr-edit-inner"},[a("div",{staticClass:"props-attr-style"},[a("propsAttr")],1),a("div",{staticClass:"common-attr-style"},[a("baseAttr")],1)]):a("div",[a("p",{staticClass:"gray paddingT30 text-center"},[t._v("请在画板上选择需要编辑得元素")])])])},G=[],K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"样式",name:"1"}},[a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("尺寸：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.activeElement.commonStyle.width,callback:function(e){t.$set(t.activeElement.commonStyle,"width",e)},expression:"activeElement.commonStyle.width"}}),a("div",{staticClass:"attr-item-edit-input-des"},[t._v("宽度")])],1),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.activeElement.commonStyle.height,callback:function(e){t.$set(t.activeElement.commonStyle,"height",e)},expression:"activeElement.commonStyle.height"}}),a("div",{staticClass:"attr-item-edit-input-des"},[t._v("高度")])],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("位置：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.activeElement.commonStyle.left,callback:function(e){t.$set(t.activeElement.commonStyle,"left",e)},expression:"activeElement.commonStyle.left"}}),a("div",{staticClass:"attr-item-edit-input-des"},[t._v("X")])],1),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.activeElement.commonStyle.top,callback:function(e){t.$set(t.activeElement.commonStyle,"top",e)},expression:"activeElement.commonStyle.top"}}),a("div",{staticClass:"attr-item-edit-input-des"},[t._v("Y")])],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("旋转：")]),a("div",{staticClass:"col-1 attr-item-edit-input"},[a("el-slider",{attrs:{"show-input":"",min:-180,max:180,marks:{0:"",90:"","-90":""},"input-size":"mini"},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.rotate,callback:function(e){t.$set(t.activeElement.commonStyle,"rotate",e)},expression:"activeElement.commonStyle.rotate"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("透明度：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,max:1,step:.1},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.opacity,callback:function(e){t.$set(t.activeElement.commonStyle,"opacity",e)},expression:"activeElement.commonStyle.opacity"}})],1)])]),a("el-collapse-item",{attrs:{title:"字体：",name:"4"}},[a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("字体颜色：")]),a("div",{staticClass:"attr-item-edit-input"},[a("el-color-picker",{attrs:{size:"mini"},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.color,callback:function(e){t.$set(t.activeElement.commonStyle,"color",e)},expression:"activeElement.commonStyle.color"}})],1)]),a("div",{staticClass:"random-color"},[a("el-checkbox",{staticClass:"el-checkbox",model:{value:t.textColorIsRandom,callback:function(e){t.textColorIsRandom=e},expression:"textColorIsRandom"}},[t._v("随机")]),a("el-select",{staticClass:"el-select",attrs:{multiple:"",disabled:!t.textColorIsRandom,placeholder:"请选择随机列表"},on:{change:t.setTextRandomColor},model:{value:t.activeElement.commonStyle.candidateColor,callback:function(e){t.$set(t.activeElement.commonStyle,"candidateColor",e)},expression:"activeElement.commonStyle.candidateColor"}},t._l(t.popularTextColors,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value}})})),1)],1),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("字体大小：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.fontSize,callback:function(e){t.$set(t.activeElement.commonStyle,"fontSize",e)},expression:"activeElement.commonStyle.fontSize"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("字体粗细：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:300,step:100,max:900},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.fontWeight,callback:function(e){t.$set(t.activeElement.commonStyle,"fontWeight",e)},expression:"activeElement.commonStyle.fontWeight"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("字间距：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},on:{change:t.throttleAddHistory},model:{value:t.activeElement.commonStyle.letterSpacing,callback:function(e){t.$set(t.activeElement.commonStyle,"letterSpacing",e)},expression:"activeElement.commonStyle.letterSpacing"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("对齐方式：")]),a("div",{staticClass:"sizeAndPosition-wrapper"},[a("div",{staticClass:"align-type-item clearFlex",on:{click:function(e){return t.handleTextAlignClick("left")}}},[a("el-tooltip",{attrs:{effect:"dark",content:"左对齐",placement:"bottom"}},[a("i",{staticClass:"iconfont iconzuoduiqi1"})])],1),a("div",{staticClass:"align-type-item clearFlex",on:{click:function(e){return t.handleTextAlignClick("center")}}},[a("el-tooltip",{attrs:{effect:"dark",content:"居中对齐",placement:"bottom"}},[a("i",{staticClass:"iconfont iconjuzhongduiqi"})])],1),a("div",{staticClass:"align-type-item clearFlex",on:{click:function(e){return t.handleTextAlignClick("right")}}},[a("el-tooltip",{attrs:{effect:"dark",content:"右对齐",placement:"bottom"}},[a("i",{staticClass:"iconfont iconyouduiqi2"})])],1)])])])],1)],1)},Q=[];a("a481"),a("28a5");function tt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function et(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var at={data:function(){return{popularTextColors:[{name:"橙红色",value:"#FF2400"},{name:"淡紫色",value:"#DB70DB"},{name:"中春绿色",value:"#7FFF00"},{name:"霓虹粉红",value:"##FF6EC7"},{name:"石板蓝",value:"#007FFF"},{name:"青色",value:"#00FFFF"},{name:"珊瑚红",value:"#FF7F00"}],activeNames:["1"],alignTypeList:[{title:"左对齐",icon:"iconfont iconzuoduiqi",type:"l"},{title:"上对齐",icon:"iconfont iconshangduiqi",type:"t"},{title:"右对齐",icon:"iconfont iconyouduiqi",type:"r"},{title:"下对齐",icon:"iconfont iconxiaduiqi",type:"b"},{title:"垂直居中对齐",icon:"iconfont iconchuizhijuzhongduiqi",type:"tb"},{title:"水平居中对齐",icon:"iconfont iconshuipingjuzhongduiqi",type:"lr"}],borderStyleList:[{label:"实线",value:"solid"},{label:"虚线",value:"dashed"},{label:"点状",value:"dotted"},{label:"双线",value:"double"}],boxShadow:{h:0,v:0,blur:0,spread:0,color:"#000000"},textColorIsRandom:!1}},computed:et(et({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID},activeAttrEditCollapse:function(t){return t.template.activeAttrEditCollapse}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement","activePage"])),watch:{activeElementUUID:function(){var t=this;this.$nextTick((function(){t.initBoxShadowEdit()}))},activeNames:function(){this.$store.commit("template/updateActiveAttrEditCollapse",this.activeNames)}},created:function(){this.throttleAddHistory=Object(s["throttle"])(this.addHistory,3e3)},mounted:function(){this.initBoxShadowEdit(),this.activeNames=this.activeAttrEditCollapse},methods:{addHistory:function(){this.$store.dispatch("template/addHistoryCache")},setTextRandomColor:function(){var t=this.activeElement.commonStyle.candidateColor.length;t>0&&(this.activeElement.commonStyle.color=this.activeElement.commonStyle.candidateColor[Math.floor(Math.random()*t)])},changeAlignType:function(t){var e=this.$config.canvasH5Width,a=this.$config.canvasH5Height,n=this.activeElement.commonStyle.width,i=this.activeElement.commonStyle.height;switch(t){case"t":this.activeElement.commonStyle.top=0;break;case"b":this.activeElement.commonStyle.top=Object(s["subtract"])(a-i);break;case"l":this.activeElement.commonStyle.left=0;break;case"r":this.activeElement.commonStyle.left=Object(s["subtract"])(e-n);break;case"tb":this.activeElement.commonStyle.top=Object(s["ceil"])(Object(s["divide"])(Object(s["subtract"])(a-i),2),2);break;case"lr":this.activeElement.commonStyle.left=Object(s["ceil"])(Object(s["divide"])(Object(s["subtract"])(e-n),2),2);break}},initBoxShadowEdit:function(){var t=this.activeElement.commonStyle.boxShadow,e={h:0,v:0,blur:0,spread:0,color:"#000000"};if(t&&"none"!==t){var a=t.split(" ");e={h:parseInt(a[0].replace("px","")),v:parseInt(a[1].replace("px","")),blur:parseInt(a[2].replace("px","")),spread:parseInt(a[3].replace("px","")),color:a[4]},this.boxShadow=e}else this.boxShadow=e},boxShadowChange:function(){var t="".concat(this.boxShadow.h,"px ").concat(this.boxShadow.v,"px  ").concat(this.boxShadow.blur,"px  ").concat(this.boxShadow.spread,"px  ").concat(this.boxShadow.color);this.activeElement.commonStyle.boxShadow=t},handleTextAlignClick:function(t){this.activeElement.commonStyle.textAlign=t},handleResizeClick:function(t){t.includes("w")&&(this.activeElement.commonStyle.left=0,this.activeElement.commonStyle.width=this.$config.canvasH5Width),t.includes("h")&&(this.activeElement.commonStyle.top=0,this.activeElement.commonStyle.height=this.$config.canvasH5Height)}}},nt=at,it=(a("de39"),a("e918"),Object(v["a"])(nt,K,Q,!1,null,"7a2521fc",null)),ot=it.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.currentElementProps.length?a("div",[a("div",{staticClass:"attr-title marginB10 fontBold"},[t._v("组件属性")]),a("el-form",t._l(t.currentElementProps,(function(e){return a("attr-qk-"+e,t._b({key:e,tag:"component"},"component",t.activeElement.propsValue,!1,!0))})),1)],1):t._e()},ct=[],lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text"},[a("el-form-item",{attrs:{label:"文本内容："}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入文本内容"},model:{value:t.templateText,callback:function(e){t.templateText=e},expression:"templateText"}})],1),a("el-form-item",{attrs:{label:"字体:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeFont},model:{value:t.templateFont,callback:function(e){t.templateFont=e},expression:"templateFont"}},t._l(t.fonts,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)},st=[];function pt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ut(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var mt={name:"attr-qk-text",props:{text:String,font:{type:String,default:"wryh"}},data:function(){return{templateText:"",templateFont:"",fonts:[{value:"wryh",label:"微软雅黑"}]}},mounted:function(){this.templateText=this.text,this.templateFont=this.font},created:function(){this.getFonts()},computed:ut(ut({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID},activeAttrEditCollapse:function(t){return t.template.activeAttrEditCollapse}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement","activePage"])),watch:{text:function(){this.templateText=this.text},templateText:function(){this.$emit("update:text",this.templateText)},templateFont:function(){this.$emit("update:font",this.templateFont)}},methods:{changeFont:function(t){var e=this.templateFont.split("/")[1].split(".")[0];console.log(e),this.$store.dispatch("template/resetElementCommonStyle",{"font-family":e})},getFonts:function(){for(var t=a("b03a").keys(),e=0;e<t.length;e++){var n=t[e];this.fonts.push({label:n.split("/")[1].split(".")[0],value:n})}}}},dt=mt,ft=Object(v["a"])(dt,lt,st,!1,null,"611153ac",null),ht=ft.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"图片："}},[a("fileUploader",{on:{postPath:t.getPostPath},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},vt=[],bt=a("545b"),yt={name:"attr-qk-imageSrc",props:{imageSrc:String},components:{fileUploader:bt["a"]},data:function(){return{tempValue:"",postPath:""}},mounted:function(){this.tempValue=this.imageSrc},watch:{imageSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:imageSrc",this.tempValue)}},methods:{getPostPath:function(t){this.postPath=t}}},Ot=yt,jt=Object(v["a"])(Ot,gt,vt,!1,null,"2a09d30e",null),wt=jt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"相册动画间隔："}},[a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,step:.1,max:100},model:{value:t.tempVal,callback:function(e){t.tempVal=e},expression:"tempVal"}})],1)])},St=[],Pt={name:"attr-qk-interval",props:{interval:Number},data:function(){return{tempVal:""}},mounted:function(){this.tempVal=this.interval},watch:{interval:function(){this.tempVal=this.interval},tempVal:function(){this.$emit("update:interval",this.tempVal)}}},xt=Pt,kt=Object(v["a"])(xt,Ct,St,!1,null,"729bc148",null),Dt=kt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"视频地址："}},[a("fileUploader",{attrs:{type:"video"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},_t=[],Ut={name:"attr-qk-videoSrc",props:{videoSrc:String},components:{fileUploader:bt["a"]},data:function(){return{tempValue:""}},mounted:function(){this.tempValue=this.videoSrc},watch:{videoSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:videoSrc",this.tempValue)}}},It=Ut,$t=Object(v["a"])(It,Et,_t,!1,null,"660bd9c2",null),Tt=$t.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",t._l(t.tempValue,(function(e,n){return a("div",{key:n,staticClass:"con"},[a("fileUploader",{attrs:{type:"image"},on:{uploaded:t.imgUploaded},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"item.url"}}),a("div",[a("span",{staticClass:"imageSelect-btn",on:{click:function(e){return t.onClick("+",n)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})]),a("span",{staticClass:"imageSelect-btn",on:{click:function(e){return t.onClick("-",n)}}},[a("i",{staticClass:"el-icon-remove-outline"})])]),a("hr",{staticClass:"hr"})],1)})),0)},At=[],zt={name:"attr-qk-imageSrcList",props:{imageSrcList:{type:Array,default:function(){return[]}}},components:{fileUploader:bt["a"]},data:function(){return{tempValue:[]}},created:function(){this.fillTempValue()},methods:{fillTempValue:function(){var t=[];this.imageSrcList.forEach((function(e){return t.push({url:e})})),this.tempValue=t},imgUploaded:function(){var t=this.getResultImageSrcList();this.$emit("update:imageSrcList",t)},getResultImageSrcList:function(){for(var t=[],e=0,a=this.tempValue.length;e<a;e++)t.push(this.tempValue[e].url);return t},onClick:function(t,e){if("+"===t)this.tempValue.splice(e+1,0,{url:"/static/demo/demo.jpg"});else{if(this.tempValue.length<=2)return void this.$message("最少要有两张图片!");this.tempValue.splice(e,1)}this.imgUploaded()}}},Ft=zt,Rt=(a("a19b"),Object(v["a"])(Ft,Vt,At,!1,null,"1083cae2",null)),Lt=Rt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"url地址："}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入url地址"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},Nt=[],Bt={name:"attr-qk-url",props:{url:String},data:function(){return{tempValue:""}},mounted:function(){this.tempValue=this.url},watch:{url:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:url",this.tempValue)}}},Wt=Bt,Ht=Object(v["a"])(Wt,qt,Nt,!1,null,"6d27d296",null),Mt=Ht.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"颜色："}},[a("el-color-picker",{attrs:{size:"mini","show-alpha":!0},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},Jt=[],Zt={name:"attr-qk-bgColor",props:{bgColor:{type:String,default:function(){return"#ffcc22"}}},mounted:function(){this.tempValue=this.bgColor},data:function(){return{tempValue:"#ffcc22"}},watch:{imageSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:bgColor",this.tempValue)}}},Yt=Zt,Gt=Object(v["a"])(Yt,Xt,Jt,!1,null,"db7d5c2e",null),Kt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form-item",{attrs:{label:"资源地址："}},[a("fileUploader",{attrs:{type:"music"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}})],1)},te=[],ee={name:"attr-qk-musicSrc",props:{musicSrc:String},components:{fileUploader:bt["a"]},data:function(){return{tempValue:""}},mounted:function(){this.tempValue=this.musicSrc},watch:{musicSrc:function(t){this.tempValue=t},tempValue:function(){this.$emit("update:musicSrc",this.tempValue)}}},ae=ee,ne=Object(v["a"])(ae,Qt,te,!1,null,"44f6a1d6",null),ie=ne.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text"},[a("el-form-item",{attrs:{label:"文本内容："}},[a("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入文本内容，换行分段"},model:{value:t.templateText,callback:function(e){t.templateText=e},expression:"templateText"}})],1),a("el-form-item",{attrs:{label:"字体:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeFont},model:{value:t.templateFont,callback:function(e){t.templateFont=e},expression:"templateFont"}},t._l(t.fonts,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)},re=[];function ce(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function le(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var se,pe={name:"attr-qk-subtitle",props:{subtitle:String,font:{type:String,default:"wryh"}},data:function(){return{templateText:"",templateFont:"",fonts:[{value:"wryh",label:"微软雅黑"}]}},mounted:function(){this.templateText=this.subtitle,this.templateFont=this.font},created:function(){this.getFonts()},computed:le(le({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID},activeAttrEditCollapse:function(t){return t.template.activeAttrEditCollapse}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement","activePage"])),watch:{text:function(){this.templateText=this.subtitle},templateText:function(){this.$emit("update:subtitle",this.templateText)},templateFont:function(){this.$emit("update:font",this.templateFont)}},methods:{changeFont:function(t){var e=this.templateFont.split("/")[1].split(".")[0];console.log(e),this.$store.dispatch("template/resetElementCommonStyle",{"font-family":e})},getFonts:function(){for(var t=a("b03a").keys(),e=0;e<t.length;e++){var n=t[e];this.fonts.push({label:n.split("/")[1].split(".")[0],value:n})}}}},ue=pe,me=Object(v["a"])(ue,oe,re,!1,null,"3119820a",null),de=me.exports,fe=(se={},Object(r["a"])(se,ht.name,ht),Object(r["a"])(se,de.name,de),Object(r["a"])(se,Dt.name,Dt),Object(r["a"])(se,wt.name,wt),Object(r["a"])(se,Tt.name,Tt),Object(r["a"])(se,Mt.name,Mt),Object(r["a"])(se,ie.name,ie),Object(r["a"])(se,Kt.name,Kt),Object(r["a"])(se,Lt.name,Lt),se);function he(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ge(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?he(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ve={components:ge({},fe),computed:ge(ge(ge({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID},activeAttrEditCollapse:function(t){return t.template.activeAttrEditCollapse}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement","activePage"])),{},{currentElementProps:function(){if(!this.activeElement.propsValue)return[];var t=Object.keys(this.activeElement.propsValue),e=Object.keys(fe);return t=t.filter((function(t){return e.includes("attr-qk-"+t)})),t}}),watch:{},data:function(){return{tempType:[],tag:{text:[],type:1}}},methods:{symbolChange:function(){var t=this.tempType;this.activeElement.tag.type=-1,console.log(this.activeElement.tag);var e=t.length;t.includes("企业号")&&t.includes("员工")&&2===e?this.activeElement.tag.type=23:t.includes("员工")&&1===e?this.activeElement.tag.type=3:t.includes("企业号")&&1===e?this.activeElement.tag.type=2:t.includes("顾客")&&1===e?this.activeElement.tag.type=1:t.includes("顾客")&&t.includes("员工")&&2===e?this.activeElement.tag.type=13:t.includes("顾客")&&t.includes("企业号")&&2===e?this.activeElement.tag.type=12:t.includes("顾客")&&t.includes("员工")&&t.includes("企业号")&&3===e&&(this.activeElement.tag.type=123)}}},be=ve,ye=Object(v["a"])(be,rt,ct,!1,null,"46acf69a",null),Oe=ye.exports;function je(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function we(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?je(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ce={props:{},components:{baseAttr:ot,propsAttr:Oe},computed:we(we({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex"]))},Se=Ce,Pe=(a("ec31"),a("6064"),Object(v["a"])(Se,Y,G,!1,null,"4c56ccaa",null)),xe=Pe.exports,ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-attr-edit components-attr-animate-edit"},[a("el-scrollbar",{staticClass:"components-attr-edit"},[t.activeElementUUID?a("div",{staticClass:"attr-edit-inner"},[a("div",{staticClass:"animate-edit-btn-wrapper"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:t.addAnimate}},[t._v("添加动画")]),a("el-button",{attrs:{icon:"el-icon-caret-right",size:"small"},on:{click:function(e){return t.runAnimate(void 0)}}},[t._v("预览动画")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.activeElement.animations.length,expression:"activeElement.animations.length"}],staticClass:"el-animate-list-wrapper paddingT20"},[a("el-collapse",{attrs:{accordion:""}},t._l(t.activeElement.animations,(function(e,n){return a("el-collapse-item",{key:n},[a("template",{slot:"title"},[a("span",{staticClass:"el-animate-title-name"},[t._v("动画 "+t._s(n))]),a("div",{staticClass:"el-animate-title-type-wrapper"},[a("span",{staticClass:"el-animate-title-type",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleShowChooseAnimatePanel(n)}}},[t._v(t._s(e.type)+" "),a("i",{staticClass:"el-icon-caret-right size-mini"})])]),a("span",{staticClass:"el-animate-title-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.runAnimate(n)}}},[a("i",{staticClass:"el-icon-caret-right"})]),a("span",{staticClass:"el-animate-title-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleDeleteAnimate.apply(null,arguments)}}},[a("i",{staticClass:"el-icon-delete"})])]),a("div",{staticClass:"el-animate-item"},[a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("动画时长：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,step:.1},model:{value:e.duration,callback:function(a){t.$set(e,"duration",a)},expression:"item.duration"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("动画延迟：")]),a("div",{staticClass:"col-2  attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,step:.1},model:{value:e.delay,callback:function(a){t.$set(e,"delay",a)},expression:"item.delay"}})],1)])])],2)})),1)],1)]):a("div",[a("p",{staticClass:"gray paddingT30 text-center"},[t._v("请在画板上选择需要编辑得元素")])])]),a("div",{staticClass:"components-attr-edit animate-choose-list-wrapper",class:{fadeInUp:t.showAnimatePanel,fadeInDown:!t.showAnimatePanel,animate:t.showAnimatePanel}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.animateCssDatas,(function(e){return a("el-tab-pane",{key:e.label,attrs:{label:e.label,name:e.label}},[a("el-scrollbar",{staticClass:"animate-choose-item"},t._l(e.children,(function(n,i){return a("div",{key:i,class:n.unclick?"animate-choose-item-inner unclick":"animate-choose-item-inner",on:{mouseover:function(e){t.hoverPreviewAnimate=n.value},mouseleave:function(e){t.hoverPreviewAnimate=""},click:function(e){return t.handleChooseAnimate(n)}}},[a("span",{staticClass:"animate-choose-image",class:[t.hoverPreviewAnimate===n.value&&n.value+" animated"],style:{backgroundPosition:e.bg_X+"px "+e.bg_Y+"px"}}),a("p",[t._v(t._s(n.label))])])})),0)],1)})),1)],1)],1)},De=[],Ee=a("9ed0"),_e=a("965e"),Ue=a("aee2");function Ie(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function $e(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ie(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Te={data:function(){return{animateCssDatas:Ee["a"],activeName:"进入",showAnimatePanel:!1,reSelectAnimateIndex:void 0,hoverPreviewAnimate:""}},computed:$e($e({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement"])),watch:{activePageUUID:function(){this.addAnimate(!1)},activeElementUUID:function(){this.addAnimate(!1)}},methods:{handleChooseAnimate:function(t){for(var e=0;e<_e["a"].children.length;e++)if(t.value===_e["a"].children[e].value)return console.log(t.value),"";var a;this.showAnimatePanel=!1,"random"===t.value&&(console.log(t.value),a=this.createRandomAnimate(this.activeName),t=a),void 0===this.reSelectAnimateIndex?(console.log(t.value),this.$store.dispatch("template/addElementAnimate",t.value)):(this.activeElement.animations[this.reSelectAnimateIndex].type=t.value,this.$store.dispatch("template/addHistoryCache"))},handleDeleteAnimate:function(t){this.$store.dispatch("template/deleteElementAnimate",t)},addAnimate:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.showAnimatePanel=t,this.reSelectAnimateIndex=void 0},handleShowChooseAnimatePanel:function(t){this.reSelectAnimateIndex=t,this.showAnimatePanel=!0},runAnimate:function(t){console.log(t);var e=void 0===t?this.activeElement.animations:[this.activeElement.animations[t]];Ue["a"].$emit("RUN_ANIMATIONS",this.activeElement.uuid,e)},createRandomAnimate:function(t){var e;if("进入"===t)e=Ee["a"][0].children;else if("强调"===t)e=Ee["a"][1].children;else{if("退出"!==t)return-1;e=Ee["a"][2].children}var a=e.length;return console.log(a),e[Object(s["random"])(1,a-1)]},isdisClick:function(t){for(var e=0;e<_e["a"].children.length;e++)if(t.value===_e["a"].children[e].value)return"";this.handleChooseAnimate(t)}}},Ve=Te,Ae=(a("e8ff"),a("0805"),Object(v["a"])(Ve,ke,De,!1,null,"7750326c",null)),ze=Ae.exports,Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-attr-edit"},[a("el-scrollbar",{staticClass:"components-attr-edit"},[t.activeElementUUID?a("div",{staticClass:"attr-edit-inner"},[a("div",{staticClass:"animate-edit-btn-wrapper"},[a("el-dropdown",[a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("\n            添加事件"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.eventTypeList,(function(e,n){return a("el-dropdown-item",{key:n},[a("div",{on:{click:function(a){return t.addEvent(e.value)}}},[t._v(t._s(e.label))])])})),1)],1),a("p",{staticClass:"gray inline-block fontsize-12 marginL10"},[t._v("事件在编辑模式下无效果")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.activeElement.events.length,expression:"activeElement.events.length"}],staticClass:"el-animate-list-wrapper paddingT20"},[a("el-collapse",{attrs:{accordion:""}},t._l(t.activeElement.events,(function(e,n){return a("el-collapse-item",{key:n},[a("template",{slot:"title"},[a("span",{staticClass:"el-animate-title-name"},[t._v("事件 "+t._s(n+1))]),a("div",{staticClass:"el-animate-title-type-wrapper"},[a("span",{staticClass:"el-animate-title-type"},[t._v(t._s(t._f("getLabelText")(e.type,t.eventTypeList)))])]),a("span",{staticClass:"el-animate-title-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteEvent(n)}}},[a("i",{staticClass:"el-icon-delete"})])]),a("div",{staticClass:"el-animate-item"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"share"!==e.type,expression:"item.type !== 'share'"}],staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("链接/接口url：")]),a("div",{staticClass:"col-1  attr-item-edit-input"},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入url"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"item.url"}})],1)])])],2)})),1)],1)]):a("div",[a("p",{staticClass:"gray paddingT30 text-center"},[t._v("请在画板上选择需要编辑得元素")])])])],1)},Re=[];function Le(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function qe(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Ne={name:"event-edit",data:function(){return{eventTypeList:[{label:"链接跳转",value:"link"},{label:"分享",value:"share"},{label:"表单提交",value:"submitForm"}]}},computed:qe(qe({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement","activePage"])),methods:{addEvent:function(t){this.$store.dispatch("addElementEvent",t)},deleteEvent:function(t){this.$store.dispatch("deleteElementEvent",t)}}},Be=Ne,We=(a("9bcf"),Object(v["a"])(Be,Fe,Re,!1,null,"5ee140e0",null)),He=We.exports,Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-scrollbar",{staticClass:"components-attr-edit"},[a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("背景颜色：")]),a("div",{staticClass:"attr-item-edit-input no-top"},[a("el-color-picker",{attrs:{size:"mini","show-alpha":!0},model:{value:t.activePage.commonStyle.backgroundColor,callback:function(e){t.$set(t.activePage.commonStyle,"backgroundColor",e)},expression:"activePage.commonStyle.backgroundColor"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("场景时长：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:1,max:1e3,step:.1},model:{value:t.activePage.data.duration,callback:function(e){t.$set(t.activePage.data,"duration",e)},expression:"activePage.data.duration"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("过渡动画：")]),a("pageTrans",{model:{value:t.activePage.data.trans,callback:function(e){t.$set(t.activePage.data,"trans",e)},expression:"activePage.data.trans"}})],1),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("过渡动画时长：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0,max:1e3,step:.1},model:{value:t.activePage.data.transDuration,callback:function(e){t.$set(t.activePage.data,"transDuration",e)},expression:"activePage.data.transDuration"}})],1)]),a("div",{staticClass:"attr-item-edit-wrapper"},[a("p",{staticClass:"attr-item-title"},[t._v("视频尺寸：")]),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.projectData.width,callback:function(e){t.$set(t.projectData,"width",e)},expression:"projectData.width"}}),a("div",{staticClass:"attr-item-edit-input-des"},[t._v("宽度")])],1),a("div",{staticClass:"col-2 attr-item-edit-input"},[a("el-input-number",{attrs:{size:"mini","controls-position":"right",min:0},model:{value:t.projectData.height,callback:function(e){t.$set(t.projectData,"height",e)},expression:"projectData.height"}}),a("div",{staticClass:"attr-item-edit-input-des"},[t._v("高度")])],1)])])},Xe=[],Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tempValue,callback:function(e){t.tempValue=e},expression:"tempValue"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1)},Ze=[],Ye=["随机","Fat","Lens","Shake","Slice","Stretch","Fluidly","BackOff","Oblique","MoveLeft","Windows4","Colorful","Magnifier","Tetrapod","Sunflower","ZoomRight","Radiation","WaterWave","HangAround","FastSwitch","WindowShades","CircleCrop","TricolorCircle","Quicksand"],Ge={props:{value:{type:String,default:""}},components:{},data:function(){return{tempValue:"",options:Ye.map((function(t){return{value:t,label:t}}))}},mounted:function(){this.tempValue=this.value},methods:{},watch:{value:function(t){this.tempValue=t},tempValue:function(){if("随机"===this.tempValue){var t=Object(s["random"])(0,Ye.length-1,!1);this.tempValue=Ye[t],console.log(this.tempValue)}this.$emit("input",this.tempValue)}}},Ke=Ge,Qe=Object(v["a"])(Ke,Je,Ze,!1,null,"4c253380",null),ta=Qe.exports;function ea(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function aa(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ea(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ea(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var na={components:{pageTrans:ta},computed:aa(aa({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),Object(w["c"])("template",["activePage"])),methods:{}},ia=na,oa=(a("092d"),Object(v["a"])(ia,Me,Xe,!1,null,"cdf91b28",null)),ra=oa.exports,ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-script-edit"},[a("p",{staticClass:"page-title fontBold"},[t._v("脚本编辑")]),a("p",{staticClass:"gray paddingL10 fontsize-12"},[t._v("js脚本在编辑模式下无效果")]),a("div",{staticClass:"paddingT20"},[a("el-input",{attrs:{type:"textarea",rows:20,placeholder:"请输入代码"},model:{value:t.projectData.script,callback:function(e){t.$set(t.projectData,"script",e)},expression:"projectData.script"}})],1)])},la=[];function sa(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function pa(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?sa(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):sa(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var ua={computed:pa(pa({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),Object(w["c"])("template",["currentPageIndex","activeElementIndex","activeElement","activePage"]))},ma=ua,da=Object(v["a"])(ma,ca,la,!1,null,"62a618af",null),fa=da.exports,ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"components-contrl-bar"},[a("div",{staticClass:"button-item scale-wrappper"},[a("span",{staticClass:"scale-btn",on:{click:function(e){return t.updateScale("reduce")}}},[a("i",{staticClass:"el-icon-zoom-out"})]),a("span",{staticClass:"scale-input"},[t._v(t._s(parseFloat(100*t.scaleValue).toFixed(0))+"%")]),a("span",{staticClass:"scale-btn",on:{click:function(e){return t.updateScale("plus")}}},[a("i",{staticClass:"el-icon-zoom-in"})])]),a("div",{staticClass:"button-item",class:{disabled:!t.canUndo},on:{click:t.editorUndo}},[a("i",{staticClass:"iconfont iconundo1"}),a("p",[t._v("撤销")])]),a("div",{staticClass:"button-item",class:{disabled:!t.canRedo},on:{click:t.editorRedo}},[a("i",{staticClass:"iconfont iconredo1"}),a("p",[t._v("重做")])]),a("UploadPsd",{on:{"upload-success":t.uploadSuccessPsd}},[a("div",{staticClass:"button-item"},[a("i",{staticClass:"iconfont iconps"}),a("p",[t._v("导入psd")])])]),a("div",{staticClass:"button-item",on:{click:t.save}},[a("i",{staticClass:"iconfont iconbaocun"}),a("p",[t._v("保存")])]),a("div",{staticClass:"button-item",on:{click:t.publishFn}},[a("i",{staticClass:"iconfont iconyulan"}),a("p",[t._v("预览")])])],1)},ga=[],va=a("e7ec");function ba(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ya(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ba(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ba(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Oa={components:{UploadPsd:va["a"]},props:{loading:{type:Boolean,default:!1},scale:{type:Number,default:1}},data:function(){return{scaleValue:1}},computed:ya({},Object(w["c"])("template",["canUndo","canRedo"])),created:function(){this.scaleValue=this.scale},methods:ya(ya({},Object(w["b"])("template",["editorUndo","editorRedo"])),{},{updateScale:function(t,e){"plus"===t?this.scaleValue=this.scaleValue+(e||.1)>2?2:this.scaleValue+(e||.1):"reduce"===t?this.scaleValue=this.scaleValue-(e||.1)>.5?this.scaleValue-(e||.1):.5:"reset"===t&&(this.scaleValue=e||1),this.$emit("update:scale",this.scaleValue)},uploadSuccessPsd:function(t){this.$emit("import-psd-data",t)},save:function(){this.$emit("save")},publishFn:function(){this.$emit("publish")},cancelFn:function(){this.$emit("cancel")}})},ja=Oa,wa=(a("eac1"),Object(v["a"])(ja,ha,ga,!1,null,"636b54a9",null)),Ca=wa.exports,Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showVideo?t._e():a("el-progress",{staticClass:"loader",attrs:{"stroke-width":10,percentage:t.percent}}),a("previewWrapper",{attrs:{pageData:t.pageData,videoUrl:t.videoUrl,showVideo:t.showVideo},on:{closePanel:t.closePanel}}),a("screenshotLayer",{on:{making:t.making}})],1)},Pa=[],xa=a("a1a8"),ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"con",staticClass:"screenshot-layer"},t._l(t.pagesData.pages,(function(e,n){return a("div",{key:e.uuid,staticClass:"slayer-page",style:{width:t.pagesData.width+"px",height:t.pagesData.height+"px"},attrs:{id:"slayer-p-"+n}},[a("div",{staticClass:"page-preview-wrapper",style:t.getCommonStyle(e.commonStyle),attrs:{id:"slayer-pw-"+n}},t._l(e.elements,(function(e){return a(e.elName,t._b({key:e.uuid,tag:"component",staticClass:"element-on-edit-pane",style:t.getCommonStyle(Object.assign({},e.commonStyle,{width:e.commonStyle.width,height:e.commonStyle.height,left:e.commonStyle.left,top:e.commonStyle.top,position:e.commonStyle.position})),attrs:{uuid:e.uuid,id:"slayer-e-"+e.uuid,defaultStyle:e.commonStyle}},"component",e.propsValue,!1))})),1)])})),0)},Da=[],Ea=(a("7514"),a("ae4b")),_a=a.n(Ea),Ua=a("e409"),Ia=a.n(Ua),$a=a("dc4f"),Ta=a.n($a);function Va(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Aa(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Va(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Va(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var za={name:"screenshot-layer",components:Aa({},m["a"]),computed:Aa({},Object(w["d"])({projectData:function(t){return t.template.projectData}})),created:function(){Ue["a"].$on("publishTemplate",this.publishFun)},beforeDestroy:function(){Ue["a"].$off("publishTemplate",this.publishFun),this.pagesData={pages:[]}},data:function(){return{getCommonStyle:L["a"].getCommonStyle,pagesData:{pages:[]},videoData:[],folderId:1,dialogVisible:!0,postData:[]}},methods:{publishFun:function(){var t=this;this.reset(),this.pagesData=L["a"].processingProjectData(this.projectData,!0),this.videoData=L["a"].cloneToVideoData(this.projectData),this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.folderId=_a.a.gen(),a=t.groupingPagesData(t.pagesData),n=t.rearrangeDom(a),e.next=5,t.screenshotAndUpload(n);case 5:return i=e.sent,o=t.updateVideoData(i),e.next=9,Ta.a.set(1e3);case 9:return t.postData=o,e.next=12,t.beginMakingVideo(o);case 12:case"end":return e.stop()}}),e)}))))},updateVideoData:function(t){if(!t)return this.videoData;for(var e=0;e<t.length;e++){var a=t[e],n=a.id,i=a.url,o=a.localPath,r=L["a"].getDataByKeyFromVideoData(this.videoData,n);r&&(r.propsValue.imageSrc=i,r.propsValue.localPath=o)}return this.videoData},beginMakingVideo:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$API.templateBeginMakeVideo({videoData:e,folderId:this.folderId,id:this.$route.query.id});case 2:a=t.sent,200===a.code&&(n=a.body,i=n.taskId,o=n.uuid,this.getProgressing({taskId:i,uuid:o}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getProgressing:function(t){var e=this,a=t.taskId,n=t.uuid,i=0,r=500,c=1e5/r,l=!1,s=setInterval(Object(o["a"])(regeneratorRuntime.mark((function t(){var o,r,p,u,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.templateGetVideoPercent({taskId:a,uuid:n,id:e.$route.query.id});case 2:o=t.sent,200==o.code?(r=o.body,p=r.progress,u=r.state,m=r.videoUrl,e.$emit("making",{progress:p,state:u,videoUrl:m}),"complete"===u&&!1===l&&(l=!0,clearInterval(s),e.updateData({videoUrl:m}))):clearInterval(s),i>c&&clearInterval(s),i++;case 6:case"end":return t.stop()}}),t)}))),r)},updateData:function(t){var e=t.videoUrl;this.projectData.videoUrl=e,this.$API.templateUpdatePage({pageData:this.projectData})},screenshotAndUpload:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=[],n=0;case 2:if(!(n<e.length)){t.next=13;break}return i=e[n],t.next=6,this.screenshots(i,n);case 6:if(o=t.sent,!Object(s["isEmpty"])(o)){t.next=9;break}return t.abrupt("continue",10);case 9:for(r=0;r<o.length;r++)c=o[r],a.push(c);case 10:n++,t.next=2;break;case 13:return t.next=15,this.uploadAllImages(a);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),uploadAllImages:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Object(s["isEmpty"])(e)){t.next=2;break}return t.abrupt("return");case 2:return a=new FormData,Object(s["forEach"])(e,(function(t,e){a.append("file".concat(e),t.file),a.append("data".concat(e),t.id)})),a.append("folder",this.folderId),a.append("id",String(this.$route.query.id)),t.next=8,this.$API.uploadMultipleImages(a);case 8:if(n=t.sent,!n.status){t.next=11;break}return t.abrupt("return",n.body);case 11:return t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),screenshots:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,o,r,c,l,p,u=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Object(s["isEmpty"])(e)){t.next=2;break}return t.abrupt("return");case 2:return n=this.$refs.con,i=this.pagesData,o=i.width,r=i.height,c=e.map((function(t){return[o,r]})),t.next=7,B()(n,{elements:e,size:c,scale:1,x:0,y:0,allowTaint:!0,removeContainer:!0,backgroundColor:null,proxy:"/quark/html2canvas/corsproxy"});case 7:return l=t.sent,p=[],Object(s["forEach"])(l,(function(t,e){var n="image-".concat(a,"-").concat(e),i=u.$mUtils.canvasToFile({name:n,canvas:t,quality:.9,type:"png"});p.push(i)})),t.abrupt("return",p);case 11:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),groupingPagesData:function(t){for(var e=this,a=[],n=function(t){var e=!1;if("qk-image"===t.elName){console.log(t.propsValue.imageSrc);var a=t.propsValue.imageSrc.split(".").pop();"gif"===a&&(e=!0)}return!Object(s["isEmpty"])(t.animations)||"qk-video"===t.elName||"qk-image-carousel"===t.elName||"qk-text"===t.elName||e},i=function(i){for(var o=t.pages[i],r=e.videoData.pages[i],c=[],l=[],p=0,u=function(){Object(s["isEmpty"])(l)||(c.push(Object(s["clone"])(l)),r.elements.push({elName:"qk-image",isFFImage:!0,index:p,commonStyle:{width:t.width,height:t.height},key:"image-".concat(i,"-").concat(p),propsValue:{imageSrc:null}}),p++),l.length=0},m=0;m<o.elements.length;m++){var d=o.elements[m];n(d)?(u(),c.push(d.uuid),r.elements.push(Object(s["cloneDeep"])(d))):l.push(d.uuid)}u(),a.push(c)},o=0;o<t.pages.length;o++)i(o);return a},rearrangeDom:function(t){for(var e=[],a=this.$refs.con,n=0;n<t.length;n++){var i=t[n],o=[];e.push(o);for(var r=0;r<i.length;r++){var c=i[r];if(Object(s["isArray"])(c)){var l=this.createElesCon(r);Ia()(a).find("#slayer-pw-".concat(n)).append(l),o.push(l.get(0));for(var p=0;p<c.length;p++)l.append(Ia()(a).find("#slayer-e-".concat(c[p])))}else Ia()(a).find("#slayer-e-".concat(c)).css("display","none")}}return e},createElesCon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:99,e=this.pagesData,a=e.width,n=e.height;return Ia()("<div></div>").addClass("slayer-page page-con").css({width:a+"px",height:n+"px",zIndex:t+100,position:"absolute",overflow:"hidden",top:0,left:0})},reset:function(){this.pagesData={pages:[]},this.videoData=[]}}},Fa=za,Ra=(a("637c"),Object(v["a"])(Fa,ka,Da,!1,null,"193b0015",null)),La=Ra.exports,qa={components:{previewWrapper:xa["a"],screenshotLayer:La},props:{pageData:{type:Object,require:!0}},data:function(){return{percent:0,showVideo:!1,videoUrl:null}},mounted:function(){Ue["a"].$on("publishTemplate",this.publishFun)},beforeDestroy:function(){Ue["a"].$off("publishTemplate",this.publishFun)},methods:{closePanel:function(){this.$emit("closePanel",!1)},publishFun:function(){console.log("making-panel"),this.percent=0},saveFn:function(){this.$emit("saveFn")},making:function(t){var e=t.progress,a=t.state,n=t.videoUrl;this.percent=100*e,"complete"===a&&(this.showVideo=!0,this.videoUrl=n)}}},Na=qa,Ba=(a("67e6"),Object(v["a"])(Na,Sa,Pa,!1,null,"1f280320",null)),Wa=Ba.exports;function Ha(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Ma(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ha(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ha(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Xa={components:{componentLibs:y,pageManage:D,templateLibs:z,editorPan:Z,attrEdit:xe,animationEdit:ze,eventEdit:He,pageAttrEdit:ra,scriptEdit:fa,controlBar:Ca,makingPanel:Wa},data:function(){return{id:"",loading:!1,showMakingPanel:!1,activeAttr:"属性",activeSideBar:"templateLibs",sidebarMenus:[{label:"我的作品",value:"pageManage",elementUiIcon:"el-icon-mobile"},{label:"我的模板",value:"componentLibs",elementUiIcon:"el-icon-document"},{label:"创意模板",value:"templateLibs",elementUiIcon:"el-icon-s-shop"}],canvasConfig:{scale:1}}},computed:Ma({},Object(w["d"])({projectData:function(t){return t.template.projectData},activePageUUID:function(t){return t.template.activePageUUID},activeElementUUID:function(t){return t.template.activeElementUUID}})),created:function(){this.$store.dispatch("template/setPrjectData"),this.id=this.$route.query.id,this.initPageData()},methods:{initPageData:function(){var t=this;this.loading=!0;var e=this.$route.params.type;console.log("type:",e),this.$API.getPageDetail({pageId:this.id}).then((function(a){t.loading=!1,t.$store.dispatch("template/setPrjectData",Ma({},a.body)),"newTemplate"===e||"editTemplate"===e?(t.projectData.isTemplate=!0,t.projectData.isPublish=!1):"useTemplate"===e?(t.projectData.isTemplate=!1,t.projectData.isPublish=!0):"copyTemplate"===e&&(t.projectData.isTemplate=!0,t.projectData.title="".concat(t.projectData.title,"_副本"),t.projectData.isPublish=!1),t.projectData.templateId=a.body._id})).catch((function(){t.loading=!1}))},updatePageData:function(t){var e=this;this.$API.templateUpdatePage({pageData:t}).then((function(){e.$message.success("保存成功!"),e.$store.dispatch("template/setPrjectData",t),console.log("pageData:",t),e.showMakingPanel=!1}))},saveFn:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$prompt("请输入标题","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.projectData.title}).then((function(t){var a=t.value,n=Ma(Ma({},e.projectData),{},{title:a});e.updatePageData(n)})).catch((function(){}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),publishFn:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.screenshots();case 2:"视频"===this.projectData.title?this.$prompt("请输入标题","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:this.projectData.title}).then((function(t){var e=t.value,n=Ma(Ma({},a.projectData),{},{title:e,isPublish:!1});a.$message.success("保存成功!"),console.log("pageData:",n),a.showMakingPanel=!0,a.$API.templateUpdatePage({pageData:n}),a.$store.dispatch("template/setPrjectData",n),a.$nextTick((function(){return Ue["a"].$emit("publishTemplate")}))})).catch((function(){})):(e=Ma(Ma({},this.projectData),{},{isPublish:!1}),this.showMakingPanel=!0,this.$API.templateUpdatePage({pageData:e}),this.$store.dispatch("template/setPrjectData",e),this.$nextTick((function(){return Ue["a"].$emit("publishTemplate")})));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showPreviewFn:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.screenshots();case 2:this.$API.templateUpdatePage({pageData:this.projectData}).then((function(){e.showMakingPanel=!0}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancelFn:function(){var t=this;this.$confirm("确认退出编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push({name:"Home"})})).catch((function(){}))},screenshots:function(){var t=this,e=document.querySelector("#canvas-panel");new Promise((function(a,n){B()(e,{proxy:"".concat(t.$config.baseURL,"/common/html3canvas/corsproxy")}).then((function(e){var a=e.toDataURL("image/jpeg");t.$store.commit("template/updateCoverImage",a)}))}))},importPsdData:function(t){var e=this,a=t.elements,n=t.document.width,i=this.projectData.width/n;a.forEach((function(t){var a=t.width,n=t.height,o=t.top,r=t.left,c=t.imageSrc,l=t.opacity,s=t.zIndex;setTimeout((function(){e.$store.dispatch("template/addElement",{elName:"qk-image",defaultStyle:{width:a*i,height:n*i,top:o*i,left:r*i,zIndex:s,opacity:l},needProps:{imageSrc:c}})}),10)}))},onContextmenu:function(t){return t.preventDefault(),!1},handleTabChange:function(t){switch(t.name){case"pageManage":this.$router.push("/home/page-list");break;case"componentLibs":this.$router.push("/home/my-template");break;case"templateLibs":this.$router.push("/home/template-list");break}}}},Ja=Xa,Za=(a("6a47"),a("e72c"),Object(v["a"])(Ja,n,i,!1,null,"d8a961e6",null));e["default"]=Za.exports}}]);